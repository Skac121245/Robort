<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robotics Match Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            margin: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        .hidden {
            display: none;
        }
        img {
            width: 100%;
            max-width: 600px;
            height: auto;
        }
        h1, h2, .container {
            text-align: center;
        }
        #field_image {
            background-image: url("images/crescendo_feild.png");
            background-size: contain;
            border: 1px solid #000;
            width: 1152px;
            height: 498px;
            display: flex;
        }
        #notesContainer .note-btn {
            /* display: inline;  */
            background-color: rgba(0, 200, 150, 0.5);
            border: none;
            color: white;
            padding: 8px 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            position: absolute;
            opacity: 60%;
        }

        .driver-station-btnB{
            position: absolute;
            background-color: rgba(0, 123, 255, 0.5);
            /* Semi-transparent blue */
            border: none;
            color: white;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
            height: 50px;
        }

         .driver-station-btnR{
            position: absolute;
            background-color: rgba(255, 65, 65, 0.6);
            /* Semi-transparent blue */
            border: none;
            color: white;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .position-btnB{
            position: absolute;
            background-color: rgba(0, 123, 255, 0.5);
            /* Semi-transparent blue */
            border: none;
            color: black;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .position-btnR{
            position: absolute;
            background-color: rgba(255, 65, 65, 0.6);
            /* Semi-transparent blue */
            border: none;
            color: white;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
    </style>
</head>
<body>
    <input type="file" id="uploadButton" accept=".json">
    <h1 id="teamDisplay" class="hidden"></h1>
    <h2 id="matchNumber" class="hidden"></h2>

    <div id="autoContainer" class="container hidden">
        <h3>Autonomous Phase</h3>
        <div id="field_image">
            <div id="notesContainer" style="position: relative; width: 100%; height: 100%;">

                <button id="Position 1" class="position-btnB" style="display: none; position: absolute; top: 20%; left: 15%;">Position 1</button>
                <button id="Position 2" class="position-btnB" style="display: none; position: absolute; top: 35%; left: 18%;">Position 2</button>
                <button id="Position 3" class="position-btnB" style="display: none; position: absolute; top: 50%; left: 15%;">Position 3</button>
                <button id="Position 4" class="position-btnB" style="display: none; position: absolute; top: 70%; left: 15%;">Position 4</button>
        
                <button id="Position 5" class="position-btnR" style="display: none; position: absolute; top: 20%; left: 78%;">Position 5</button>
                <button id="Position 6" class="position-btnR" style="display: none; position: absolute; top: 35%; left: 75%;">Position 6</button>
                <button id="Position 7" class="position-btnR" style="display: none; position: absolute; top: 50%; left: 78%;">Position 7</button>
                <button id="Position 8" class="position-btnR" style="display: none; position: absolute; top: 70%; left: 78%;">Position 8</button>

            <button id='Note 1' class="note-btn" style="display: none; position: absolute; top: 20%; left: 23%;"
                onclick="noteAction('Note 1')">Note
                1</button>
            <button id='Note 2' class="note-btn" style="display: none; position: absolute; top: 35%; left: 23%;"
                onclick="noteAction('Note 2')">Note
                2</button>
            <button id='Note 3' class="note-btn" style="display: none; position: absolute; top: 50%; left: 23%;"
                onclick="noteAction('Note 3')">Note
                3</button>
            <button id='Note 4' class="note-btn" style="display: none; position: absolute; top: 16%; left: 47%;"
                onclick="noteAction('Note 4')">Note
                4</button>
            <button id='Note 5' class="note-btn" style="display: none; position: absolute; top: 33%; left: 47%;"
                onclick="noteAction('Note 5')">Note
                5</button>
            <button id='Note 6' class="note-btn" style="display: none; position: absolute; top: 50%; left: 47%;"
                onclick="noteAction('Note 6')">Note
                6</button>
            <button id='Note 7' class="note-btn" style="display: none; position: absolute; top: 67%; left: 47%;"
                onclick="noteAction('Note 7')">Note
                7</button>
            <button id='Note 8' class="note-btn" style="display: none; position: absolute; top: 85%; left: 47%;"
                onclick="noteAction('Note 8')">Note
                8</button>
            <button id='Note 9' class="note-btn" style="display: none; position: absolute; top: 20%; left: 71%;"
                onclick="noteAction('Note 9')">Note
                9</button>
            <button id='Note 10' class="note-btn" style="display: none; position: absolute; top: 35%; left: 71%;"
                onclick="noteAction('Note 10')">Note
                10</button>
            <button id='Note 11' class="note-btn" style="display: none; position: absolute; top: 50%; left: 71%;"
                onclick="noteAction('Note 11')">Note
                11</button>
            </div>
        </div>
        <ul id="autoActionsList"></ul>
    </div>

    <div id="teleopContainer" class="container hidden">
        <h3>Teleoperated Phase</h3>
        <div id="field_image">
<div class="driver-btns" style="position: relative; width: 100%; height: 100%;">
    <button id="Driver Station 1 BLUE" class="driver-station-btnB" style="position: absolute; display: none; top: 18%; left: 0px; width:120px;">Driver Station 1 BLUE</button>
    <button id="Driver Station 2 BLUE" class="driver-station-btnB" style="position: absolute; display: none; top: 53%; left: 0px; width:120px;">Driver Station 2 BLUE</button>
    <button id="Driver Station 3 BLUE" class="driver-station-btnB" style="position: absolute; display: none; top: 72%; left: 0px; width: 120px;">Driver Station 3 BLUE</button>

    <button id="Driver Station 3 RED" class="driver-station-btnR" style="position: absolute; display: none; top: 18%; left: 90%;">Driver Station 3 RED</button>
    <button id="Driver Station 2 RED" class="driver-station-btnR" style="position: absolute; display: none; top: 53%; left: 90%;">Driver Station 2 RED</button>
    <button id="Driver Station 1 RED" class="driver-station-btnR" style="position: absolute; display: none; top: 72%; left: 90%;">Driver Station 1 RED</button>
</div>
        </div>
        <ul id="teleopActionsList"></ul>
    </div>

    <div id="endgameContainer" class="container hidden">
        <h3>Endgame Phase</h3>
        <p id="endgameAction"></p>
    </div>

    <script>
        document.getElementById('uploadButton').addEventListener('change', function(event) {
            const fileReader = new FileReader();
            fileReader.onload = function() {
                const data = JSON.parse(fileReader.result);
                document.getElementById('teamDisplay').textContent = "Team " + data.teamNumber;
                document.getElementById('matchNumber').textContent = "Match #" + data.matchNumber;
                document.getElementById('teamDisplay').classList.remove('hidden');
                document.getElementById('matchNumber').classList.remove('hidden');
                document.getElementById('uploadButton').classList.add('hidden');

                // Populate note buttons
                const notesContainer = document.getElementById('notesContainer');
                const positions = [
                    {top: '20%', left: '23%'}, {top: '35%', left: '23%'}, {top: '50%', left: '23%'},
                    {top: '16%', left: '47%'}, {top: '33%', left: '47%'}, {top: '50%', left: '47%'},
                    {top: '67%', left: '47%'}, {top: '85%', left: '47%'}, {top: '20%', left: '71%'},
                    {top: '35%', left: '71%'}, {top: '50%', left: '71%'}
                ];
                data.autoActions.forEach((note, index) => {
                    index = index + 1
                    const note_button = document.getElementById(note.note)
                    note_button.style.display = "inline"
                    note_button.innerHTML = "Note " + index + "(" + note.outcome + ")";
                    if (note.outcome === "scored") {
                        note_button.style.backgroundColor = "green"
                    } else if (note.outcome === "missed") {
                        note_button.style.backgroundColor = "red"
                    } else if (note.outcome === "not picked up") {
                        note_button.style.backgroundColor = "yellow"
                    }  else if (note.outcome === "another team got it") {
                        note_button.style.backgroundColor = "brown"
                    } 
                });
                document.getElementById(data.robotPosition).style.display = "inline"
                document.getElementById('autoContainer').classList.remove('hidden');
                document.getElementById('teleopContainer').classList.remove('hidden');
                console.log(data.driverStation)
                document.getElementById(data.driverStation).style.display = 'inline'
            };
            fileReader.readAsText(event.target.files[0]);
        });
    </script>
</body>
</html>
