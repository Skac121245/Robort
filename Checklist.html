<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre Match Checklist</title>
    <script src="jquery-3.3.1.slim.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <link href="bootstrap.min.css" rel="stylesheet">
    <script src="showdown.min.js"></script>
    <style>
          #aboutTabsContent > .tab-pane {
    padding-top: 20px; /* Add space above the content in each tab */
}
  body, nav, header, .navbar, #footer, a {
    transition: background-color 0.3s ease, color 0.3s ease;
}
        body {
            background-color: #343a40;
            display: block;
        }

        nav {
            margin-bottom: 20px;
        }

        .navbar-light .navbar-nav .nav-link {
            color: #696868;
        }

        .navbar-light .navbar-nav .nav-link:hover {
            color: #000000;
        }

        #checklistContainer {
            padding: 20px;
            background: #ffffff;
            border-radius: 0.25rem;
            box-shadow: 0 0.45rem 0.25rem rgba(0,0,0,0.075);
        }

        .checklist-item label {
            font-size: 1.125rem;
            font-weight: bold;
            margin-left: 10px;
            margin-bottom: -10px;
            cursor: pointer;
        }

        .checklist-item label.strikethrough {
    text-decoration: line-through;
}
.checklist-item .header-label{
    margin-left: -1px;  /* Specific override for header labels */
    margin-bottom: 1px;
 
}


        .form-control {
            border-radius: 0.25rem;
        }

        .btn, .upload-btn {
            cursor: pointer;
        }

        .btn-primary, .upload-btn {
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-primary:hover, .upload-btn:hover {
            color: #fff;
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .btn-success {
            color: #fff;
            background-color: #28a745;
            border-color: #28a745;
        }

        .btn-success:hover {
            color: #fff;
            background-color: #218838;
            border-color: #1e7e34;
        }

        input[type="file"] {
            display: none;
        }
       

/* Ensure uniform size and margin for buttons and labels */
.button-wrapper label {
    margin: 0; 
    height: 38px; 
    display: inline-flex; /* Align text and icons within buttons/labels */
    align-items: center; /* Center items vertically inside the button/label */
    justify-content: center; /* Center items horizontally inside the button/label */
}
.upload-success-alert {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    visibility: hidden; /* Initially hidden */
    opacity: 0;
    z-index: 1051; /* Higher than Bootstrap modals */
    transition: visibility 0s linear 0.5s, opacity 0.5s linear; /* Delay visibility change */
    background-color: #d4edda; /* Light green background */
    color: #155724; /* Dark green text */
    border-color: #c3e6cb;
    padding: 0.75rem 1.25rem;
    border-radius: 0.25rem;
}

.upload-success-alert.show {
    visibility: visible;
    opacity: 1;
    transition: opacity 0.5s linear;
}
/* Dark Mode Toggle Switch Styles */
.switch {
  position: relative;
  display: inline-block;
  width: 80px;
  height: 34px;
  margin: 10px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: background-color .4s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: transform .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #555; /* Dark mode slider color */
}

input:checked + .slider:before {
  transform: translateX(46px); /* Slide to the right */
}

.icon {
  color: #fff;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 20px;
  transition: opacity 0.4s; /* Smooth transition for opacity */
}

.sun {
  left: 10px;
  opacity: 0; /* Start hidden */
}

.moon {
  right: 10px;
  opacity: 1; /* Start visible */
}

input:checked + .slider .sun {
  opacity: 1; /* Fade in when dark mode is on */
}

input:checked + .slider .moon {
  opacity: 0; /* Fade out when dark mode is on */
}

input:not(:checked) + .slider .sun {
  opacity: 0; /* Remain hidden when light mode is on */
}

input:not(:checked) + .slider .moon {
  opacity: 1; /* Remain visible when light mode is on */
}

/* Styles for dark and light modes */
.bg-dark, .navbar-dark {
  background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}

body.bg-dark .mt-4 {
    background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}

body.bg-dark .dropdown-item {
    background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}

body.bg-dark .dropdown-menu {
    background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}
body.bg-dark .dropdown-item:hover {
    background-color: #f8f9fa !important; /* Light gray background */
  color: #343a40 !important; /* Dark text for readability */
}

.bg-light, .navbar-light {
  background-color: #f8f9fa !important; /* Light gray background */
  color: #343a40 !important; /* Dark text for readability */
}

body .bg-dark #patch-notes, #aboutTabsContent {
    color: #f8f9fa !important; /* Sets the text color for all content within the patch-notes container */
}

body .bg-dark #patch-notes h3, #patch-notes p, #patch-notes a {
    color: inherit !important; /* Ensures that headers, paragraphs, and links inherit the same color */
}

body .bg-light #patch-notes, #aboutTabsContent {
    color: #343a40 !important; /* Sets the text color for all content within the patch-notes container */
}
div.modal-body, h5#clearModalLabel.modal-title, h5#errorModalLabel.modal-title {
    color: #343a40 !important; 
}

body .bg-light #patch-notes h3, #patch-notes p, #patch-notes a {
    color: inherit !important; /* Ensures that headers, paragraphs, and links inherit the same color */
}


/* Enhanced specific selectors for navbar in dark mode */
.navbar-dark {
  background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}

.navbar-dark .navbar-nav .nav-link,
.navbar-dark .navbar-brand {
  color: #f8f9fa !important; /* Ensure navbar text colors are adjusted for dark mode */
}

.navbar-dark .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='rgba(248, 249, 250, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
}

.nav-link.active {
  color: #343a40 !important;
}

    </style>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
        document.body.style.display = "none"; // Hide body as soon as DOM is ready but not fully loaded
    });
</script>  
</head>
<body>
    <nav class="navbar navbar-expand-lg shadow-sm mb-4">
        <div class="container">
            <a class="navbar-brand" href="#" id="roborte">Robort</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./Team_List_element.html">Teams</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Scouting
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="./Strat_Board_w_tabs.html">Canvas</a>
                            <a class="dropdown-item" href="./scoutingGen.html">Scouting Generator</a>
                            <a class="dropdown-item" href="./scoutingUI.html">Live Scouter (WIP)</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./Checklist.html">Pre Match Checklist</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./2423_Features.html">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Config_tab.html">Configure</a>
                    </li>
                </ul>
                <label class="switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="slider round">
                      <span class="icon sun">ðŸŒž</span> <!-- Sun icon -->
                      <span class="icon moon">ðŸŒœ</span> <!-- Moon icon -->
                    </span>
                  </label>
            </div>
        </div>
    </nav>
   <!-- <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Pre Match Checklist</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
            <a class="nav-item nav-link" href="./index.html">Home <span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link" href="./Team_List_element.html">Teams</a>
            <a class="nav-item nav-link" href="./Strat_Board_w_tabs.html">Canvas</a>
            <a class="nav-item nav-link active" href="./Checklist.html">Pre Match Checklist</a>
            <a class="nav-item nav-link" href="./2423_Features.html">Features</a>
            <a class="nav-item nav-link" href="./Config_tab.html">Configure</a>
        </div>
    </div>
</nav> -->
    <div class="container mt-4" id="checklistContainer">
        <!-- Checklist items will be dynamically inserted here -->
    </div>
    
    <div class="container mt-4 justify-content-between button-wrapper" style="background-color:transparent !important;">
        <form id="addItemForm" class="mb-3">
            <div class="input-group mb-3">
                <input type="text" id="newItems" class="form-control" placeholder="Enter items separated by commas" aria-label="Checklist item">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="submit">Add Items</button>
                </div>
            </div>
        </form>
        <button id="clearChecklist" class="btn btn-danger" data-toggle="modal" data-target="#clearModal">Clear Checklist</button>
        <button id="downloadChecklist" class="btn btn-success">Download Checklist</button>
        <input type="file" id="uploadChecklist">
        <input type="file" id="uploadChecklistInput" style="display: none;">
<label for="uploadChecklistInput" class="btn btn-info upload-btn">Upload Checklist</label>

    </div>
    <!-- Add Bootstrap Modal for Clear Confirmation -->
    <div class="modal fade" id="clearModal" tabindex="-1" role="dialog" aria-labelledby="clearModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="clearModalLabel">Clear Checklist</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to clear the checklist? This action will remove all items from local storage.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmClear">Clear Checklist</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Error Modal -->
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="errorModalLabel">Upload Error</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="errorModalBody">
                The file is not valid JSON.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
    <!-- About the Project Modal -->
    <div id="aboutModal" class="modal text-center modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="aboutTabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="about" aria-selected="true">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="patch-notes-tab" data-toggle="tab" href="#patch-notes" role="tab" aria-controls="patch-notes" aria-selected="false">Patch Notes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="feedback-tab" data-toggle="tab" href="#feedback" role="tab" aria-controls="feedback" aria-selected="false">Feedback</a>
                        </li>    
                    </ul>
                    <div class="tab-content" id="aboutTabsContent">
                        <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                            <h2>Robort</h2>
                            <h4>The ultimate in FRC competition gear</h4>
                            <h5>Co-developed by Ben Skraly and Toba Banjo</h5>
                            <p>Whether you're preparing to scout a heated match, sharing information about your team, or analyzing other robots, Robort has got you covered. Complete with modular design and accessible systems, it's the best tool both on and off the field.</p>
                            <span>&copy; <script>document.write(new Date().getFullYear());</script> Watertown High School Robotics</span>
                        </div>
                        <div class="tab-pane fade" id="patch-notes" role="tabpanel" aria-labelledby="patch-notes-tab">
                            <!-- Patch notes will be populated here by JavaScript -->
                        </div>
                        <div class="tab-pane fade" id="feedback" role="tabpanel" aria-labelledby="feedback-tab">
                            <form id="feedbackForm">
                                <div class="form-group">
                                    <label for="feedbackType">Select Feedback Type:</label>
                                    <select class="form-control" id="feedbackType" onchange="toggleFeedbackForm()">
                                        <option value="feature">Feature Suggestion</option>
                                        <option value="bug">Bug Report</option>
                                    </select>
                                </div>
                                <!-- Feature Suggestion Form -->
                                <div id="featureForm" style="display: block;">
                                    <div class="form-group">
                                        <label>Feature Area: <label style="color:red">*</label></label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="featureArea" id="statistics" value="Statistics/Data">
                                                <label class="form-check-label" for="statistics">Statistics/Data</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="featureArea" id="scouting" value="Scouting">
                                                <label class="form-check-label" for="scouting">Scouting</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="featureArea" id="quality" value="Quality of Life">
                                                <label class="form-check-label" for="quality">Quality of Life</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="featureArea" id="other" value="Other">
                                                <label class="form-check-label" for="other">Other</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="featureDescription">Description:</label>
                                        <textarea class="form-control" id="featureDescription" rows="3"></textarea>
                                    </div>
                                </div>
                                <!-- Bug Report Form -->
                                <div id="bugForm" style="display: none;">
                                    <div class="form-group">
                                        <label for="bugTitle">Title:</label>
                                        <input type="text" class="form-control" id="bugTitle">
                                    </div>
                                    <div class="form-group">
                                        <label for="bugSummary">Issue Summary:</label>
                                        <textarea class="form-control" id="bugSummary" rows="2"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="bugSteps">Steps to Reproduce:</label>
                                        <textarea class="form-control" id="bugSteps" rows="3"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="bugResults">Expected vs. Actual Results:</label>
                                        <textarea class="form-control" id="bugResults" rows="2"></textarea>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                        </div>                    
                    </div>
                </div>
            </div>
        </div>
    </div>
  <script src="electron.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const checklistContainer = document.getElementById('checklistContainer');
            const addItemForm = document.getElementById('addItemForm');
            const newItemsInput = document.getElementById('newItems');
            let checklistItems = [];
            loadChecklist();

            function renderChecklist(items) {
                checklistContainer.innerHTML = '';
                items.forEach((item, index) => {
    const div = document.createElement('div');
    div.className = 'checklist-item form-check';

    let content;
    
    if (typeof item === 'string') {
        content = item;
    } else if (item && typeof item.text === 'string') { // Ensure item and item.text are valid
        content = item.text;
    } else {
        console.error('Invalid item:', item);
        return; // Skip this iteration if item is not valid
    }

    // Now that you've validated content, it's safe to use trim and other methods
    if (content.trim().startsWith('#')) {
        const label = document.createElement('label');
    label.innerHTML = parseMarkdown(content);
    label.className = 'header-label';  // Add a class for styling and targeting
    div.classList.remove('form-check'); // Headers do not need form-check class
    div.appendChild(label);

    // Bind mouseover and mouseout only to the label
    label.addEventListener('mouseover', function() {
        this.classList.add('strikethrough');
    });
    label.addEventListener('mouseout', function() {
        this.classList.remove('strikethrough');
    });

    // Click event to remove the header
    label.addEventListener('click', function() {
        checklistItems.splice(index, 1);
        localStorage.setItem('preMatchChecklistItems', JSON.stringify(checklistItems));
        renderChecklist(checklistItems);
    });
    } else {
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = 'check-' + index;
        checkbox.className = 'form-check-input';

        const label = document.createElement('label');
        label.htmlFor = 'check-' + index;
        label.innerHTML = parseMarkdown(content);

        div.appendChild(checkbox);
        div.appendChild(label);
// After creating and appending the label to the div
label.addEventListener('mouseover', function() {
    this.classList.add('strikethrough'); 
});
label.addEventListener('mouseout', function() {
    this.classList.remove('strikethrough'); 
});


// Add click event listener to remove item
label.addEventListener('click', function() {
    checklistItems.splice(index, 1); // Remove the item from the array
    localStorage.setItem('preMatchChecklistItems', JSON.stringify(checklistItems)); // Update local storage
    renderChecklist(checklistItems); // Re-render the checklist
});


        // Ensure checkbox event listener only adds if the checkbox exists
        checkbox.addEventListener('change', () => {
            if (typeof checklistItems[index] === 'object') { // Safeguard
                checklistItems[index].checked = checkbox.checked;
            }
            localStorage.setItem('preMatchChecklistItems', JSON.stringify(checklistItems));
        });
    }
    checklistContainer.appendChild(div);
});

            }

            document.getElementById('confirmClear').addEventListener('click', function() {
    checklistItems = []; // Clear the array
    localStorage.removeItem('preMatchChecklistItems'); // Clear local storage
    renderChecklist(checklistItems); // Re-render the checklist (now empty)
    $('#clearModal').modal('hide'); // Hide the confirmation modal
});
function loadChecklist() {
    const storedItems = JSON.parse(localStorage.getItem('preMatchChecklistItems'));
    if (storedItems) {
        checklistItems = storedItems;
    } else {
        checklistItems = [];
    }
    renderChecklist(checklistItems);
}


addItemForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const newItems = newItemsInput.value.split(',');
    newItems.forEach(item => {
        if (item.trim() !== '') { // Ensure item is a string and not empty
            checklistItems.push(item.trim()); // Add to checklist
        }
    });
    localStorage.setItem('preMatchChecklistItems', JSON.stringify(checklistItems)); // Save updated list to localStorage
    renderChecklist(checklistItems);
    newItemsInput.value = '';
});



            const downloadChecklistButton = document.getElementById('downloadChecklist');
            const uploadChecklistInput = document.getElementById('uploadChecklist');

            downloadChecklistButton.addEventListener('click', function() {
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(checklistItems));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", "checklistItems.json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
            });

            document.getElementById('uploadChecklistInput').addEventListener('change', function(e) {
    const fileReader = new FileReader();
    fileReader.onload = function() {
        try {
    const contents = JSON.parse(fileReader.result);
    if (Array.isArray(contents)) {
        // Handle array of strings or objects
        checklistItems = contents.map(item => typeof item === 'string' ? { text: item, checked: false } : item);
    } else {
        // Handle other data formats or show an error
        throw new Error('Unsupported file format');
    }
    renderChecklist(checklistItems);
    localStorage.setItem('preMatchChecklistItems', JSON.stringify(checklistItems));
    showSuccessAlert('Upload success!');
} catch (error) {
    console.error("Error parsing uploaded file as JSON:", error);
    showErrorModal("Upload failed: The file is not a valid JSON.");
}
    };
    if (e.target.files[0]) {
        fileReader.readAsText(e.target.files[0]);
    }
});

// Function to display the error modal with a custom message
function showErrorModal(errorMessage) {
    document.getElementById('errorModalBody').textContent = errorMessage; // Set the error message
    $('#errorModal').modal('show'); // Use jQuery to show the modal
}



        });

        function showSuccessAlert(message) {
    const alertBox = document.createElement('div');
    alertBox.className = 'alert alert-success upload-success-alert';
    alertBox.innerHTML = `<span class="mr-2">&#10003;</span>${message}`;
    document.body.appendChild(alertBox);

    // Trigger reflow to ensure the transition can happen
    alertBox.offsetHeight; // Read offsetHeight to force reflow

    // Start fade in
    alertBox.classList.add('show');

    // Start fade out after a delay
    setTimeout(() => {
        alertBox.classList.remove('show');

        // Remove the element after the fade-out transition completes
        setTimeout(() => {
            document.body.removeChild(alertBox);
        }, 500); // Match the CSS transition duration
    }, 3000); // Visible duration before starting fade-out
}

function parseMarkdown(text) {
    const converter = new showdown.Converter();
    return converter.makeHtml(text);
}

    </script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      const toggle = document.getElementById('darkModeToggle');
      const body = document.body;
      const navbar = document.querySelector('.navbar'); // Select the navbar element
    
      // Function to apply dark mode classes
      function enableDarkMode() {
        body.classList.add('bg-dark');
        body.classList.remove('bg-light');
        navbar.classList.add('navbar-dark');
        navbar.classList.remove('navbar-light', 'bg-white');
        document.querySelectorAll('.navbar').forEach(element => {
          element.classList.add('bg-dark');
          element.classList.remove('bg-white');
        });
        document.querySelectorAll('.form-control').forEach(element => {
      element.classList.add('bg-dark');
      element.classList.remove('bg-white');
    });
      }
    
      // Function to remove dark mode classes
      function disableDarkMode() {
        body.classList.add('bg-light');
        body.classList.remove('bg-dark');
        navbar.classList.add('navbar-light');
        navbar.classList.remove('navbar-dark', 'bg-dark');
        document.querySelectorAll('.navbar').forEach(element => {
          element.classList.add('bg-white');
          element.classList.remove('bg-dark');
        });
        document.querySelectorAll('.form-control').forEach(element => {
      element.classList.remove('bg-dark');
      element.classList.add('bg-white');
    });
      }
    
      // Initialize dark mode from local storage
      if (localStorage.getItem('darkMode') === 'true') {
        enableDarkMode();
        toggle.checked = true;
      } else {
        disableDarkMode();
      }
      body.style.display = 'block';
      // Toggle dark mode on change
      toggle.addEventListener('change', function() {
        if (this.checked) {
          localStorage.setItem('darkMode', 'true');
          enableDarkMode();
        } else {
          localStorage.setItem('darkMode', 'false');
          disableDarkMode();
        }
      });
    });
     document.getElementById('roborte').addEventListener('click', function() {
    $('#aboutModal').modal('show');
});

// Fetch and display GitHub release notes with markdown parsing and specific download link
function loadGitHubReleases() {
    const apiUrl = 'https://api.github.com/repos/skac121245/Robort/releases';
    const converter = new showdown.Converter(); // Initialize markdown converter
    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('patch-notes');
            container.innerHTML = ''; // Clear existing content
            data.forEach(release => {
                if (release.body !== null) { // Only display if there's a description
                    const markdownHTML = converter.makeHtml(release.body);
                    const releaseDiv = document.createElement('div');
                    releaseDiv.innerHTML = `
                        <h3>${release.tag_name}</h3>
                        <div>${markdownHTML}</div>
                        <a href="${release.html_url}" target="_blank">View on GitHub</a>
                        <hr>`;
                    container.appendChild(releaseDiv);
                }
            });
        })
        .catch(error => console.error('Error fetching GitHub releases:', error));
}



document.getElementById('patch-notes-tab').addEventListener('click', function() {
    loadGitHubReleases();
});

document.getElementById('feedbackForm').addEventListener('submit', async function(event) {
    event.preventDefault();  // Prevent the default form submission behavior
    const feedbackType = document.getElementById('feedbackType').value;
    let postData = {
        username: "Robort Feedback Bot",
        embeds: [],
    };

    if (feedbackType === 'feature') {
        const area = document.querySelector('input[name="featureArea"]:checked').value;
        const description = document.getElementById('featureDescription').value;
        postData.embeds.push({
            title: "Feature Suggestion",
            fields: [
                { name: "Area", value: area, inline: true },
                { name: "Description", value: description }
            ],
            color: 65280  // Green
        });
    } else {
        const title = document.getElementById('bugTitle').value;
        const summary = document.getElementById('bugSummary').value;
        const steps = document.getElementById('bugSteps').value;
        const results = document.getElementById('bugResults').value;
        postData.embeds.push({
            title: "Bug Report: " + title,
            fields: [
                { name: "Summary", value: summary },
                { name: "Steps to Reproduce", value: steps },
                { name: "Expected vs. Actual Results", value: results }
            ],
            color: 16711680  // Red
        });
    }

    try {
        const response = await fetch('https://discord.com/api/webhooks/1231365349476405268/lX0MXxHO2zwQPnNxEiuConQ8Sf47Qwq4EDrE8mLV8pctu3c63VQBjnsjAwlGLK2DPeLm', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(postData)
        });
        if (response.ok) {
            alert('Feedback submitted successfully!');
            document.getElementById('feedbackForm').reset();  // Reset the form after successful submission
        } else {
            alert('Failed to submit feedback. Please try again.');
        }
    } catch (error) {
        console.error('Error submitting feedback:', error);
        alert('Error submitting feedback. Please check your network connection and try again.');
    }
});

function toggleFeedbackForm() {
    const feedbackType = document.getElementById('feedbackType').value;
    if (feedbackType === 'feature') {
        document.getElementById('featureForm').style.display = 'block';
        document.getElementById('bugForm').style.display = 'none';
    } else {
        document.getElementById('featureForm').style.display = 'none';
        document.getElementById('bugForm').style.display = 'block';
    }
}

    </script>
     <script>
        window.onload = function() {
            document.body.style.display = "block"; // Show body when everything is loaded
        };
    </script>
</body>
</html>
