<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRC Scouting App - Autonomous Mode</title>
    <link href="bootstrap.min.css" rel="stylesheet">
<script src="jquery-3.3.1.slim.min.js"></script>
<script src="bootstrap.min.js"></script>
<style>
    #aboutTabsContent > .tab-pane {
        padding-top: 20px; /* Add space above the content in each tab */
    }

    body, nav, header, .navbar, #footer, a, th {
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    body {
        background-color: #343a40;
        display: block;
    }
    .table-responsive {
        margin: 20px 0;
    }
    .custom-table th {
        background-color: #e9ecef;
    }
    .custom-button {
        margin: 10px;
    }
    .event-code {
        font-size: 24px;
        font-weight: bold;
        color: #007bff;
    }
    .info-modal-content {
        padding: 20px;
        border-radius: 5px;
        background-color: #ffffff;
        box-shadow: 0 5px 15px rgba(0,0,0,.5);
    }

    /* Dark Mode Toggle Switch Styles */
    .switch {
        position: relative;
        display: inline-block;
        width: 80px;
        height: 34px;
        margin: 10px;
    }

    .switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: background-color .4s;
        border-radius: 34px;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: transform .4s;
        border-radius: 50%;
    }

    input:checked + .slider {
        background-color: #555; /* Dark mode slider color */
    }

    input:checked + .slider:before {
        transform: translateX(46px); /* Slide to the right */
    }

    .icon {
        color: #fff;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 20px;
        transition: opacity 0.4s; /* Smooth transition for opacity */
    }

    .sun {
        left: 10px;
        opacity: 0; /* Start hidden */
    }

    .moon {
        right: 10px;
        opacity: 1; /* Start visible */
    }

    input:checked + .slider .sun {
        opacity: 1; /* Fade in when dark mode is on */
    }

    input:checked + .slider .moon {
        opacity: 0; /* Fade out when dark mode is on */
    }

    input:not(:checked) + .slider .sun {
        opacity: 0; /* Remain hidden when light mode is on */
    }

    input:not(:checked) + .slider .moon {
        opacity: 1; /* Remain visible when light mode is on */
    }

    body .bg-dark #patch-notes, #aboutTabsContent {
        color: #f8f9fa !important; /* Sets the text color for all content within the patch-notes container */
    }

    body .bg-dark #patch-notes h3, #patch-notes p, #patch-notes a {
        color: inherit !important; /* Ensures that headers, paragraphs, and links inherit the same color */
    }

    body .bg-light #patch-notes, #aboutTabsContent {
        color: #343a40 !important; /* Sets the text color for all content within the patch-notes container */
    }

    body .bg-light #patch-notes h3, #patch-notes p, #patch-notes a {
        color: inherit !important; /* Ensures that headers, paragraphs, and links inherit the same color */
    }

    /* Styles for dark and light modes */
    .bg-dark, .navbar-dark, .card {
        background-color: #343a40 !important; /* Dark gray background */
        color: #f8f9fa !important; /* Light text for readability */
    }

    body.bg-dark table {
        background-color: #343a40; 
        color: #f8f9fa; 
    }

    body.bg-dark th {
        color: #343a40; 
    }

    .bg-light, .navbar-light, .card {
        background-color: #f8f9fa !important; /* Light gray background */
        color: #343a40 !important; /* Dark text for readability */
    }

    /* Enhanced specific selectors for navbar in dark mode */
    .navbar-dark {
        background-color: #343a40 !important; /* Dark gray background */
        color: #f8f9fa !important; /* Light text for readability */
    }

    .navbar-dark .navbar-nav .nav-link,
    .navbar-dark .navbar-brand {
        color: #f8f9fa !important; /* Ensure navbar text colors are adjusted for dark mode */
    }

    .nav-link.active {
        color: #343a40 !important;
    }

    .navbar-dark .navbar-toggler-icon {
        background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='rgba(248, 249, 250, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
    }

    /* Dark mode styles for the modal */
    .modal-content-dark {
        background-color: #343a40 !important; /* Dark background */
        color: #f8f9fa !important; /* Light text */
    }
    .modal-header-dark, .modal-footer-dark {
        background-color: #495057 !important; /* Slightly lighter dark background for header and footer */
    }
    .modal-content-dark a {
        color: #f8f9fa !important; /* Light text for readability */
    }

    body.bg-dark .dropdown-item {
        background-color: #343a40 !important; /* Dark gray background */
        color: #f8f9fa !important; /* Light text for readability */
    }
    body.bg-dark .dropdown-item:hover {
        background-color: #f8f9fa !important; /* Light gray background */
        color: #343a40 !important; /* Dark text for readability */
    }
    body.bg-dark .dropdown-menu {
        background-color: #343a40 !important; /* Light gray background */
    }
</style>
    <style>
        #field {
            width: 100%;
            /* background-image: url('https://www.chiefdelphi.com/uploads/default/original/3X/a/a/aa745548020a507cf4a07051dcd0faa446607840.png'); */
            /* background-image: url("images/crescendo_feild.png"); */
            background-size: contain;
            /* border: 1px solid #000; */
            width: 1152px;
            /* Adjust based on your actual need */
            height: 498px;
            /* Adjust based on your actual need */
            position: fixed;
            right: 20px;

        }

        iframe {
            position: fixed;
            right: 20px;
        }

        #position-btn-p1, #position-btn-p2, #position-btn-p3, #position-btn-p4,
        #driver-station-btn-1, #driver-station-btn-2, #driver-station-btn-3 {
            position: absolute;
            background-color: rgba(0, 123, 255, 0.5);
            /* Semi-transparent blue */
            border: none;
            color: white;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #position-btn-p5, #position-btn-p6, #position-btn-p7, #position-btn-p8, #driver-station-btn-4, #driver-station-btn-5, #driver-station-btn-6 {
            position: absolute;
            background-color: rgba(255, 65, 65, 0.6);
            /* Semi-transparent blue */
            border: none;
            color: white;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .position-btn:hover,
        .driver-station-btn:hover {
            background-color: rgba(0, 123, 255, 0.8);
        }

        .driver-station-btn {
            left: 1%;
        }

        #info {
            margin-top: 20px;
            padding-bottom: 20px;
            text-align: center;
        }

        .position-btn.red,
        .driver-station-btn.red {
            background-color: rgba(255, 0, 0, 0.5);
            /* Semi-transparent red */
        }

        .position-btn.red:hover,
        .driver-station-btn.red:hover {
            background-color: rgba(255, 0, 0, 0.8);
        }

        #notesContainer .note-btn {
            background-color: rgba(0, 200, 150, 0.5);
            border: none;
            color: white;
            padding: 8px 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #notesContainer .note-btn:hover {
            background-color: rgba(0, 200, 150, 0.8);
        }

        #noteOutcome button {
            margin: 0 5px;
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        #noteOutcome button:hover {
            background-color: #45a049;
        }

        #teleopContainer button {
            margin: 10px;
            padding: 8px 20px;
            /* background-color: #007bff; */
            color: white;
            border: none;
            cursor: pointer;
        }

        #teleopContainer button:hover {
            /* background-color: #0056b3; */
        }

        #endgameOutcome {
            width:420px;
        }

        #groundPickupButton1{
            top: 600px;
            left: 510px;
        }

        #groundPickupButton2{
            top: 745px; 
            left: 510px;
        }

        #groundPickupButton3 {
            top: 890px; 
            left: 510px; 
        }

        #sourceButton {
            top: 600px; 
            left: 800px;
            width: 400px;
            height: 410px;
            background-color: blue; 
        }

        #sourceButton2 {
            top: 600px; 
            left: 20px; 
            width: 400px;
            height: 410px; 
            background-color:red; 
        }

        #speaker {
            top: 600px; 
            left: 20px; 
            width: 350px; 
            height:410px;
            background-color: blue;
        }

        #amp {
            top: 600px; 
            left: 435px; 
            width: 350px; 
            height:410px;
            background-color: blue;
        }

        #pass {
            top: 600px; 
            left: 850px; 
            width: 350px; 
            height:410px; 
            background-color: blue;
        }

        #StageRightBLUE {
            background-color: blue;top: 810px; left: 20px; width: 200px; height:200px; 
        }

        #StageLeftBLUE {
            background-color: blue; top: 600px; left: 20px; width: 200px; height:200px; 
        }

        #CenterStageBLUE {
            background-color: blue;top: 705px; left: 230px; width: 200px; height:200px; 
        }

        #None {
            top: 600px; left: 390px; width: 100px; height:50px; 
        }

        #StageRightRED {
            top: 600px; left: 670px; width: 200px; height:200px; 
        }

        #StageLeftRED {
            top: 810px; left: 670px; width: 200px; height:200px; 
        }

        #CenterStageRED {
            top: 705px; left: 460px; width: 200px; height:200px;
        }

        #miss {
            top: 705px; left: 460px; width: 100px; height:50px; background-color: #45a049;
        }

        @media (max-width: 1800px) {

        #miss {
            top: 100px; left: 300px; width: 100px; height:50px; background-color: #45a049;

        }

        #groundPickupButton1{
            top: 50px;
            left: 230px;
        }

        #groundPickupButton2{
            top: 195px;
            left: 230px;
        }

        #groundPickupButton3 {
            top: 340px; 
            left: 230px; 
        }

        #sourceButton {
            top: 50px; 
            left: 10px; 
            width: 200px;
            height: 195px; 
            background-color: blue;
        }

        #sourceButton2 {
            top: 265px; 
            left: 10px; 
            width: 200px;
            height: 195px;
            background-color:red;  
        }

        #speaker {
            top: 50px; 
            left: 20px; 
            width: 200px; 
            height: 150px;
            background-color: blue;
        }

        #amp {
            top: 210px; 
            left: 100px;
            width: 200px; 
            height:150px;
            background-color: blue;
        }

        #pass {
            top: 370px; 
            left: 20px; 
            width: 200px; 
            height:150px; 
            background-color: blue;
        }

        #StageRightBLUE {
            top: 470px; left: 20px; width: 200px; height:200px; 
        }

        #StageLeftBLUE {
            top: 260px; left: 20px; width: 200px; height:200px; 
        }

        #CenterStageBLUE {
            top: 365px; left: 230px; width: 200px; height:200px; 
        }

        #None {
            top: 600px; left: 300px; width: 100px; height:50px; 
        }

        #StageRightRED {
            background-color:red; top: 150px; left: 230px; width: 200px; height:200px; 
        }

        #StageLeftRED {
            background-color:red;top: -60px; left: 230px; width: 200px; height:200px; 
        }

        #CenterStageRED {
            background-color:red;top: 50px; left: 20px; width: 200px; height:200px;
        }
    }
    .button-link {
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            background-color: #007bff;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            /* margin-right: 50%; */
        }

        .button-link:hover {
            background-color: #0056b3;
        }

        
        .overlay {
    position: fixed;
    right: 20px;
    top: 190px;
    width: 1152px; /* Adjust based on your actual need */
    height: 600px; /* Adjust based on your actual need */
    background: rgba(0, 0, 0, 0.7);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    pointer-events: all;
}

.overlay-text {
    font-size: 24px;
    font-weight: bold;
    text-align: center;
}


    </style>
</head>

<body>
    <div id="overlay" class="overlay" style="display: none;">
        <div class="overlay-text">Scouting Not Started</div>
    </div>    
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm mb-5">
        <div class="container">
            <a class="navbar-brand" href="#" id="roborte">Robort</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./Team_List_element.html">Teams</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Scouting
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="./Strat_Board_w_tabs.html">Canvas</a>
                            <a class="dropdown-item" href="./scoutingGen.html">Scouting Generator</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./Checklist.html">Pre Match Checklist</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./2423_Features.html">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Config_tab.html">Configure</a>
                    </li>
                </ul>
                <label class="switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="slider round">
                        <span class="icon sun">🌞</span> <!-- Sun icon -->
                        <span class="icon moon">🌜</span> <!-- Moon icon -->
                    </span>
                </label>
            </div>
        </div>
    </nav>
    <div id="info" class="container">
    <div class="form-row align-items-center">
        <div class="col-auto">
            <input type="number" class="form-control mb-2" id="matchNumber" placeholder="Match Number">
        </div>
        <div class="col-auto">
            <input type="number" class="form-control mb-2" id="teamNumber" placeholder="Team Number">
        </div>
        <div class="col-auto">
            <button id="startScoutingButton" class="btn btn-primary mb-2" onclick="startScouting()">Start Scouting</button>
        </div>
        <div class="col-auto">
            <button id="startTeleopButton" class="btn btn-secondary mb-2" onclick="startTeleop()" style="display:none;">Start Teleop</button>
        </div>
        <div class="col-auto">
            <button id="startEndgameButton" class="btn btn-danger mb-2" onclick="startEndgame()" style="display:none;">Start Endgame</button>
        </div>
        <div class="col-auto">
            <button class="btn btn-info mb-2" onclick="downloadSessionStorageData()">Download Data</button>
        </div>
        <div class="col-auto">
            <button class="btn btn-warning mb-2" onclick="rotateField()">Rotate Field</button>
        </div>
    </div>
</div>

    
    <iframe id="field-canvas" src="pathingUI.html" width="1155px" height="601px" style="z-index: 0;"></iframe>
    <div id="field">
        <button id="driver-station-btn-1" class="driver-station-btn" style="top: 26%; width:120px;">Driver Station 1 BLUE</button>
        <button id="driver-station-btn-2" class="driver-station-btn" style="top: 60%; width:120px;">Driver Station 2 BLUE</button>
        <button id="driver-station-btn-3" class="driver-station-btn" style="top: 80%; width: 120px;">Driver Station 3 BLUE</button>

        <button id="driver-station-btn-6" class="driver-station-btn" style="top: 26%; left: 90%;">Driver Station 3 RED</button>
        <button id="driver-station-btn-5" class="driver-station-btn" style="top: 60%; left: 90%;">Driver Station 2 RED</button>
        <button id="driver-station-btn-4" class="driver-station-btn" style="top: 80%; left: 90%;">Driver Station 1 RED</button>

        <button id="position-btn-p1" class="position-btn" style="top: 28%; left: 15%;">Position 1</button>
        <button id="position-btn-p2" class="position-btn" style="top: 45%; left: 18%;">Position 2</button>
        <button id="position-btn-p3" class="position-btn" style="top: 62%; left: 15%;">Position 3</button>
        <button id="position-btn-p4" class="position-btn" style="top: 82%; left: 15%;">Position 4</button>

        <button id="position-btn-p5" class="position-btn" style="top: 28%; left: 78%;">Position 5</button>
        <button id="position-btn-p6" class="position-btn" style="top: 45%; left: 75%;">Position 6</button>
        <button id="position-btn-p7" class="position-btn" style="top: 62%; left: 78%;">Position 7</button>
        <button id="position-btn-p8" class="position-btn" style="top: 82%; left: 78%;">Position 8</button>



        <div id="notesContainer" style="display: none; position: relative; width: 100%; height: 100%;">
            <!-- Example note buttons, position these as needed -->
            <button class="note-btn" style="position: absolute; top: 31%; left: 23%;"
                onclick="noteAction('Note 1')">Note
                1</button>
            <button class="note-btn" style="position: absolute; top: 46%; left: 23%;"
                onclick="noteAction('Note 2')">Note
                2</button>
            <button class="note-btn" style="position: absolute; top: 61%; left: 23%;"
                onclick="noteAction('Note 3')">Note
                3</button>
            <button class="note-btn" style="position: absolute; top: 26.5%; left: 46.5%;"
                onclick="noteAction('Note 4')">Note
                4</button>
            <button class="note-btn" style="position: absolute; top: 43.5%; left: 46.5%;"
                onclick="noteAction('Note 5')">Note
                5</button>
            <button class="note-btn" style="position: absolute; top: 60.5%; left: 46.5%;"
                onclick="noteAction('Note 6')">Note
                6</button>
            <button class="note-btn" style="position: absolute; top: 77.5%; left: 46.5%;"
                onclick="noteAction('Note 7')">Note
                7</button>
            <button class="note-btn" style="position: absolute; top: 95.5%; left: 46.5%;"
                onclick="noteAction('Note 8')">Note
                8</button>
            <button class="note-btn" style="position: absolute; top: 31%; left: 70.5%;"
                onclick="noteAction('Note 9')">Note
                9</button>
            <button class="note-btn" style="position: absolute; top: 46%; left: 70.5%;"
                onclick="noteAction('Note 10')">Note
                10</button>
            <button class="note-btn" style="position: absolute; top: 61%; left: 70.5%;"
                onclick="noteAction('Note 11')">Note
                11</button>
            <!-- Add more note buttons as required -->
        </div>
    </div>


    <div id="teleopContainer" style="display: none; position: absolute; width: 100%; ">
        <button id="groundPickupButton1" class="groundPickupButton"
            style="font-size:20px; background-color:green; position:absolute;  width: 200px; height: 120px; opacity: 60%;"
            onclick="logAction('Ground Pickup 1')">Ground Pickup 1</button>

        <button id="groundPickupButton2" class="groundPickupButton"
            style="font-size:20px; background-color:green; position:absolute; width: 200px; height: 120px; opacity: 60%;"
            onclick="logAction('Ground Pickup 2')">Ground Pickup 2</button>

        <button id="groundPickupButton3" class="groundPickupButton"
            style="font-size:20px; background-color:green; position:absolute; width: 200px; height: 120px; opacity: 60%;"
            onclick="logAction('Ground Pickup 3')">Ground Pickup 3</button>

        <button id="sourceButton"
            style="font-size:30px;  position:absolute; opacity: 60%;"
            onclick="logAction('Source BLUE')">Source</button>
        <button id="sourceButton2"
            style=" font-size:30px; background-color:red; position:absolute; opacity: 60%;"
            onclick="logAction('Source RED')">Source</button>

        <div id="additionalActions" style="display: none;">
            <button id="speaker" style="font-size:30px; position:absolute;  opacity: 60%;"
                onclick="logAction('Speaker')">Speaker</button>
            <button id="miss" style="font-size:30px; position:absolute;  opacity: 90%;"
                onclick="logAction('Miss')">Miss</button>
            <button id="amp" style="font-size:30px; position:absolute;  opacity: 60%;"
                onclick="logAction('Amp')">Amp</button>
            <button id="pass" style="font-size:30px; position:absolute; opacity: 60%;"
                onclick="logAction('Pass')">Pass</button>
        </div>

        <div id="endgameContainer" style="display: none; text-align: center;">
            <button id="StageRightBLUE" style="font-size:20px; position:absolute; opacity: 60%;" onclick="logEndgameAction('Stage Right BLUE')">Stage Right</button>
            <button id="StageLeftBLUE"style="font-size:20px; position:absolute; opacity: 60%;" onclick="logEndgameAction('Stage Left BLUE')">Stage Left</button>
            <button id="CenterStageBLUE"style="font-size:20px; position:absolute; opacity: 60%;" onclick="logEndgameAction('Center Stage BLUE')">Center Stage</button>
            <button id="None"style="font-size:20px; background-color:green; position:absolute; opacity: 60%;" onclick="logEndgameAction('None')">None</button>

            <button id="StageRightRED" style="font-size:20px; position:absolute; opacity: 60%;" onclick="logEndgameAction('Stage Right RED')">Stage Right</button>
            <button id="StageLeftRED" style="font-size:20px; position:absolute; opacity: 60%;" onclick="logEndgameAction('Stage Left RED')">Stage Left</button>
            <button id="CenterStageRED" style="font-size:20px; position:absolute;  opacity: 60%;" onclick="logEndgameAction('Center Stage RED')">Center Stage</button>

            <div id="endgameOutcome" style="width:600px; position:absolute; top: 620px; left: 450px; display: none; text-align: center;">
                <button style="background-color: blue;" onclick="saveEndgameOutcome('Park')">Park</button>
                <button style="background-color: blue;" onclick="saveEndgameOutcome('Climb')">Climb</button>
                <button style="background-color: blue;" onclick="saveEndgameOutcome('Harmony')">Harmony</button>
                <button style="background-color: blue;" onclick="saveEndgameOutcome('Trap')">Trap</button>
                <button style="background-color: blue;" onclick="saveEndgameOutcome('None')">None</button>


            </div>
        </div>



    </div>
    <div id="noteOutcome"
        style="display: none; padding-top:20px; position: fixed;  top: 660px; right: 360px; ">
        <button onclick="saveNoteOutcome('scored')">Scored</button>
        <button onclick="saveNoteOutcome('missed')">Missed</button>
        <button onclick="saveNoteOutcome('not picked up')">Not Picked Up</button>
        <button onclick="saveNoteOutcome('another team got it')">Another Team Got It</button>
    </div>
    <script>


        document.querySelectorAll('.position-btn').forEach(button => {
            button.addEventListener('click', function () {
                const position = this.innerText;
                selectPosition(position);
            });
        });

        function toggleSide() {
            const isChecked = document.getElementById('sideToggle').checked;
            const maxLeft = 78; // Maximum left percentage for red side
            const minLeft = 15; // Minimum left percentage for blue side

            // Calculate new positions for driver stations
            const driverStationPositions = {
                "Driver Station 1": "72%", // DS 1 becomes DS 3
                "Driver Station 2": "53%", // DS 2 remains DS 2
                "Driver Station 3": "18%"  // DS 3 becomes DS 1
            };

            document.querySelectorAll('.position-btn, .driver-station-btn').forEach(button => {
                if (isChecked) {
                    // Change to red side
                    if (button.classList.contains('driver-station-btn')) {
                        button.style.top = driverStationPositions[button.innerText]; // Update top position based on mapping
                    }
                    const currentLeft = parseInt(button.style.left, 10);
                    const newLeft = maxLeft - (currentLeft - minLeft);
                    button.style.left = `${newLeft}%`;
                    button.classList.add('red');
                } else {
                    // Change to blue side (reverse operation for driver stations)
                    const driverStationReversePositions = {
                        "Driver Station 1": "18%", // DS 3 goes back to DS 1
                        "Driver Station 2": "53%", // DS 2 remains DS 2
                        "Driver Station 3": "72%"  // DS 1 goes back to DS 3
                    };
                    if (button.classList.contains('driver-station-btn')) {
                        button.style.top = driverStationReversePositions[button.innerText];
                    }
                    const currentLeft = parseInt(button.style.left, 10);
                    const newLeft = minLeft + (maxLeft - currentLeft);
                    button.style.left = `${newLeft}%`;
                    button.classList.remove('red');
                }
            });
        }

        document.querySelectorAll('.driver-station-btn').forEach(button => {
            button.addEventListener('click', function () {
                const driverStation = this.innerText;
                selectDriverStation(driverStation);
            });
        });

        function downloadSessionStorageData() {
            // Retrieve the scouting data from session storage
            const scoutingData = sessionStorage.getItem('scoutingData');
            if (scoutingData) {
                const data = JSON.parse(scoutingData);
                const matchNumber = data.matchNumber;
                const teamNumber = data.teamNumber;
                const filename = `Match${matchNumber}_${teamNumber}_ScoutingData.json`;

                // Create a blob from the data
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });

                // Create an anchor element and use it to trigger the download
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                a.style.display = 'none';

                // Append the anchor to the body, click it, and then remove it
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            } else {
                alert('No scouting data available to download!');
            }
        }

        function selectDriverStation(driverStation) {
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData') || '{}');
            scoutingData.driverStation = driverStation;
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));
            checkSelections();
        }

        function selectPosition(position) {
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData') || '{}');
            scoutingData.robotPosition = position;
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));
            checkSelections();
        }

        function checkSelections() {
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData') || '{}');
            // if (scoutingData.driverStation && scoutingData.robotPosition) {
             if (scoutingData.robotPosition) {
                // Hide position and driver station buttons
                document.querySelectorAll('.position-btn, .driver-station-btn').forEach(button => {
                    button.style.display = 'none';
                });
                // Show notes container
                document.getElementById('notesContainer').style.display = 'block';
            }
        }

        function noteAction(note) {
            console.log('Note action for:', note);
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData'));
            if (!scoutingData.notes) {
                scoutingData.notes = [];
                scoutingData.autoActions = [];
            }
            scoutingData.notes.push(note);
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));

            // Show the note outcome options
            document.getElementById('noteOutcome').style.display = 'block';
            // Store the current note globally or in the session for outcome processing
            sessionStorage.setItem('currentNote', note);
        }

        function saveNoteOutcome(outcome) {
            const note = sessionStorage.getItem('currentNote');
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData'));
            // Append the outcome to the corresponding note
            if (!scoutingData.autoActions) {
                scoutingData.autoActions = [];
            }
            scoutingData.autoActions.push({ note: note, outcome: outcome });
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));

            // Hide the outcome buttons until the next note is selected
            document.getElementById('noteOutcome').style.display = 'none';
        }

       function startScouting() {
    const matchNumber = document.getElementById('matchNumber').value;
    const teamNumber = document.getElementById('teamNumber').value;
    const startScoutingButton = document.getElementById('startScoutingButton');

    if (startScoutingButton.innerText === 'Start Scouting') {
        if (matchNumber && teamNumber) {
            const scoutingData = {
                matchNumber: matchNumber,
                teamNumber: teamNumber,
                actions: []
            };
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));
            alert('Scouting started!');
            document.getElementById('startTeleopButton').style.display = 'inline-block';
            startScoutingButton.innerText = 'Stop Scouting';
            document.getElementById('overlay').style.display = 'none';
        } else {
            alert('Please enter both match and team numbers.');
        }
    } else {
        // Stop scouting functionality
        sessionStorage.removeItem('scoutingData');
        alert('Scouting stopped!');
        document.getElementById('startTeleopButton').style.display = 'none';
        document.getElementById('startEndgameButton').style.display = 'none';
        startScoutingButton.innerText = 'Start Scouting';
        document.getElementById('overlay').style.display = 'flex';
        resetInterface();
    }
}

// Initially display the overlay
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('overlay').style.display = 'flex';
});


       function startTeleop() {
    const startTeleopButton = document.getElementById('startTeleopButton');
    const startEndgameButton = document.getElementById('startEndgameButton');

    if (startTeleopButton.innerText === 'Start Teleop') {
        document.getElementById('field').style.display = "none";
        document.getElementById('notesContainer').style.display = 'none';
        document.getElementById('noteOutcome').style.display = 'none';
        document.getElementById('teleopContainer').style.display = 'block';
        startTeleopButton.style.display = 'none';
        startEndgameButton.style.display = 'inline-block';

        const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData'));
        scoutingData.teleopActions = [];
        sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));
    }
}

        function logAction(action) {
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData'));

            // Check if the action is a pickup (Ground Pickup or Source)
            if (action === 'Ground Pickup' || action === 'Source BLUE' || action === 'Source RED' || action === 'Ground Pickup 1' || action === 'Ground Pickup 2' || action === 'Ground Pickup 3') {
                // Store the pickup action directly to teleopActions with a placeholder for shot/place
                scoutingData.teleopActions.push({ pickup: action, shot_place: null });

                // Temporarily store the index of this action to link with its corresponding shot/place
                scoutingData.currentActionIndex = scoutingData.teleopActions.length - 1;

                // Show additional options for what happens after the pickup
                showAdditionalActions();
            } else {
                // If it's a shot/place action (Speaker, Amp, Pass), pair it with the last recorded pickup
                if (typeof scoutingData.currentActionIndex !== 'undefined') {
                    // Access the current action object and update it with the shot/place action
                    scoutingData.teleopActions[scoutingData.currentActionIndex].shot_place = action;

                    // Clear the temporary index after updating to prepare for the next series of actions
                    delete scoutingData.currentActionIndex;

                    // After logging a shot/place, revert to showing the initial pickup options
                    hideAdditionalActions();
                }
            }

            // Save the updated scouting data back to sessionStorage
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));
            console.log(action + ' action logged.');
        }


        function showAdditionalActions() {
            // Hide initial Teleop buttons and show additional actions
            document.getElementById('groundPickupButton1').style.display = 'none';
            document.getElementById('groundPickupButton2').style.display = 'none';
            document.getElementById('groundPickupButton3').style.display = 'none';

            document.getElementById('sourceButton').style.display = 'none';
            document.getElementById('sourceButton2').style.display = 'none';
            document.getElementById('additionalActions').style.display = 'block';
        }


        function hideAdditionalActions() {
            // Hide additional actions and show initial Teleop buttons again
            document.getElementById('additionalActions').style.display = 'none';
            document.getElementById('groundPickupButton1').style.display = 'inline';
            document.getElementById('groundPickupButton2').style.display = 'inline';
            document.getElementById('groundPickupButton3').style.display = 'inline';

            document.getElementById('sourceButton').style.display = 'inline';
            document.getElementById('sourceButton2').style.display = 'inline';

        }

        function logTeleopAction(action) {
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData'));
            if (!scoutingData.teleopActions) {
                scoutingData.teleopActions = [];
            }
            scoutingData.teleopActions.push(action);
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));

            // Hide additional actions and show initial Teleop buttons again
            document.getElementById('additionalActions').style.display = 'none';
            document.getElementById('groundPickupButton').style.display = 'inline';
            document.getElementById('sourceButton').style.display = 'inline';

            console.log(action + ' action logged in Teleop.');
        }

        function startEndgame() {
    const startEndgameButton = document.getElementById('startEndgameButton');

    if (startEndgameButton.innerText === 'Start Endgame') {
        document.getElementById('endgameContainer').style.display = 'block';
        document.getElementById('additionalActions').style.display = 'none';
        document.getElementById('groundPickupButton1').style.display = 'none';
        document.getElementById('groundPickupButton2').style.display = 'none';
        document.getElementById('groundPickupButton3').style.display = 'none';
        document.getElementById('sourceButton').style.display = 'none';
        document.getElementById('sourceButton2').style.display = 'none';
        startEndgameButton.style.display = 'none';
    }
}

function resetInterface() {
    document.getElementById('field').style.display = "block";
    document.getElementById('notesContainer').style.display = 'none';
    document.getElementById('noteOutcome').style.display = 'none';
    document.getElementById('teleopContainer').style.display = 'none';
    document.getElementById('endgameContainer').style.display = 'none';
    document.getElementById('additionalActions').style.display = 'none';
    document.getElementById('groundPickupButton1').style.display = 'inline';
    document.getElementById('groundPickupButton2').style.display = 'inline';
    document.getElementById('groundPickupButton3').style.display = 'inline';
    document.getElementById('sourceButton').style.display = 'inline';
    document.getElementById('sourceButton2').style.display = 'inline';
    document.getElementById('matchNumber').value = '';
    document.getElementById('teamNumber').value = '';
    document.querySelectorAll('.position-btn').forEach(button => button.style.display = 'inline-block');
    document.querySelectorAll('.driver-station-btn').forEach(button => button.style.display = 'inline-block');
}

        function logEndgameAction(action) {
            // Store the endgame action and show the secondary buttons
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData')) || {};
            scoutingData.endgameAction = action;
            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));

            console.log(action + ' endgame action logged.');

            // Show the secondary endgame outcome buttons
            document.getElementById('endgameOutcome').style.display = 'block';
        }

        function saveEndgameOutcome(outcome) {
            // Retrieve the endgame action and append the outcome to it
            const scoutingData = JSON.parse(sessionStorage.getItem('scoutingData')) || {};
            const endgameAction = scoutingData.endgameAction || {};
            scoutingData.endgameActions = scoutingData.endgameActions || [];
            scoutingData.endgameActions.push({ action: endgameAction, outcome: outcome });

            sessionStorage.setItem('scoutingData', JSON.stringify(scoutingData));

            console.log(endgameAction + ' endgame action outcome logged as ' + outcome + '.');

            // Hide the endgameOutcome buttons and the endgame action buttons
            document.getElementById('endgameOutcome').style.display = 'none';
            document.getElementById('endgameContainer').style.display = 'none';
        }

        let x = 0

        function rotateField() {
            console.log(x)
            if (x % 2 < 1) {
                document.getElementById('field-canvas').style.rotate = "180deg"
                x = x + 1
            } else {
                document.getElementById('field-canvas').style.rotate = "0deg"
                x = x + 1
            }
        }

    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggle = document.getElementById('darkModeToggle');
            const body = document.body;
            const navbar = document.querySelector('.navbar'); // Select the navbar element
    
            // Function to apply dark mode classes including modal
            function enableDarkMode() {
                body.classList.add('bg-dark');
                body.classList.remove('bg-light');
                navbar.classList.add('navbar-dark');
                navbar.classList.remove('navbar-light', 'bg-white');
                document.querySelectorAll('.navbar').forEach(element => {
                    element.classList.add('bg-dark');
                    element.classList.remove('bg-white');
                });
                document.querySelectorAll('.modal-content').forEach(element => {
                    if (!element.closest('#aboutModal')) {
                        element.classList.add('modal-content-dark');
                        element.classList.remove('modal-content-light');
                    }
                });
            }
    
            // Function to remove dark mode classes including modal
            function disableDarkMode() {
                body.classList.add('bg-light');
                body.classList.remove('bg-dark');
                navbar.classList.add('navbar-light');
                navbar.classList.remove('navbar-dark', 'bg-dark');
                document.querySelectorAll('.navbar').forEach(element => {
                    element.classList.add('bg-white');
                    element.classList.remove('bg-dark');
                });
                document.querySelectorAll('.modal-content').forEach(element => {
                    if (!element.closest('#aboutModal')) {
                        element.classList.add('modal-content-light');
                        element.classList.remove('modal-content-dark');
                    }
                });
            }
    
            // Initialize dark mode from local storage
            if (localStorage.getItem('darkMode') === 'true') {
                enableDarkMode();
                toggle.checked = true;
            } else {
                disableDarkMode();
            }
            body.style.display = 'block';
    
            // Toggle dark mode on change
            toggle.addEventListener('change', function() {
                if (this.checked) {
                    localStorage.setItem('darkMode', 'true');
                    enableDarkMode();
                } else {
                    localStorage.setItem('darkMode', 'false');
                    disableDarkMode();
                }
            });
        });
    </script>
</body>

</html>