<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Configuration</title>
</head>

<body>
    <h1>Team Configuration</h1>


    <nav>
        <a href="./index.html">Home</a>
        <a href="./Team_List_element.html">Teams</a>
        <a href="./Strat_Board_w_tabs.html">Canvas</a>
        <a href="./preMatchChecklist.html">Pre Match Checklist</a>
        <a href="./Control_Panel.html">Control Panel</a>
        <a href="./2423_Features.html">Features</a>
        <a href="Config_tab.html">Configure</a>
    </nav>

    <form id="eventCodeForm">
        <label for="eventCode">What is the code for the event you are at?</label>
        <input type="text" id="eventCode" name="eventCode" required>

        <button type="submit">Save Just Event Code</button>
    </form>

    <form id="teamForm">
        <label for="teamNumber">What is your team number?</label>
        <input type="number" id="teamNumber" name="teamNumber">

        <label for="dim_w_bump">What are your dimensions WITH bumpers? (inches)</label>
        <input type="text" id="dim_w_bump" name="dim_w_bump" placeholder="Example: X-dimension by Y-dimension">

        <label for="dim_wout_bump">What are your dimensions WITHOUT bumpers? (inches)</label>
        <input type="text" id="dim_wout_bump" name="dim_wout_bump" placeholder="Example: X-dimension by Y-dimension">

        <label for="drive_train">What is your type of Drivetrain?</label>
        <input type="text" id="drive_train" name="drive_train">

        <label for="weight">What is your robot weight? (LBS)</label>
        <input type="number" id="weight" name="weight">

        <h4>Intake Style</h4>
        <select id="intake_sty">
            <option value="Under the bumper">Under the bumper</option>
            <option value="Over bumper">Over bumper</option>
            <option value="Talk to a team member, it's hard to explain">Something Else</option>

        </select>

        <!-- <div class="checkbox">
           <h2>Where do you pick up from?</h2>
           <input type="checkbox" id="ground" name="ground">Ground<br>
           <input type="checkbox" name="source">Source<br>
      

           <h2>Where do you score?</h2>
           <input type="checkbox" name="speaker">Speaker<br>
           <input type="checkbox" name="distance_shoot">Can you shoot from distance?<br>
           <input type="checkbox" name="amp">Amp<br>
       </div> -->


        <button type="submit">Save</button>
    </form>

    <form id="autoNamesForm">
        <h4>Auto Names + Pictures</h4>
        <div id="autoNamesContainer">
            <!-- Dynamic items will be added here -->
        </div>
        <button type="button" id="addAutoName">Add Auto Name</button>
        <button type="submit">Save</button>
    </form>

    <form id="teleopForm">
        <h4>Ground</h4>
        <select id="ground">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Source</h4>
        <select id="source">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Speaker</h4>
        <select id="speaker">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Can you shoot from distance?</h4>
        <select id="distance_shoot">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Amp</h4>
        <select id="amp">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>


        <button type="submit">Save</button>
    </form>

    <form id="endGameForm">
        <h4>Can you climb?</h4>
        <select id="climb">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Can you climb, not from the center? (Harmony)</h4>
        <select id="harmony">
            <option value="Yes">YES</option>
            <option value="It's possible">It's possible</option>
            <option value="No">NO</option>
        </select>


        <button type="submit">Save</button>
    </form>



    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #000000;
        }

        h1 {
            color: #000000;
        }

        nav {
            background-color: #00f729;
            padding: 10px 0;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        nav a {
            color: rgb(0, 0, 0);
            text-decoration: none;
            font-size: 20px;
            font-weight: bold;
            padding: 10px 20px;
            display: inline-block;
        }

        nav a:hover {
            background-color: #3295ff;
        }

        form {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        label {
            display: block;
            margin: 10px 0 5px;
        }

        input[type="number"],
        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            margin-top: 10px;
            margin-bottom: 0px;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
    <script>

document.addEventListener('DOMContentLoaded', (event) => {
    document.getElementById('addAutoName').addEventListener('click', addAutoNameField);
    document.getElementById('autoNamesForm').addEventListener('submit', saveAutoNamesAndImages);
    let checklistItems = []
    const eventCodeForm = document.getElementById('eventCodeForm');
    const form = document.getElementById('teamForm');

    eventCodeForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const eventCode = document.getElementById('eventCode').value;
        localStorage.setItem('eventCode', eventCode); 

});

function addAutoNameField() {
    const container = document.getElementById('autoNamesContainer');
    const uniqueId = Date.now(); // Create a unique ID for matching label with input
    const itemDiv = document.createElement('div');
    itemDiv.className = 'autoItem';
    itemDiv.innerHTML = `
        <input type="text" placeholder="Auto Name" name="autoNames[]">
        <input type="file" accept="image/*" name="autoImages[]" id="file-${uniqueId}" style="display: none;">
        <label for="file-${uniqueId}" style="cursor: pointer;">Upload Image</label>
        <img id="preview-${uniqueId}" style="display: none;" width="100" /> <!-- Placeholder for image preview -->
    `;
    container.appendChild(itemDiv);

    document.getElementById(`file-${uniqueId}`).addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById(`preview-${uniqueId}`).src = e.target.result;
                document.getElementById(`preview-${uniqueId}`).style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    });
}
    form.addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent the form from submitting in the traditional way
        const teamNumber = document.getElementById('teamNumber').value;
        const dim_w_bump = document.getElementById('dim_w_bump').value;
        const dim_wout_bump = document.getElementById('dim_wout_bump').value;
        const drive_train = document.getElementById('drive_train').value;
        const weight = document.getElementById('weight').value;
        const intake_sty = document.getElementById('intake_sty').value;
      

        localStorage.setItem('teamNumber', teamNumber); 
        localStorage.setItem('dim_w_bump', dim_w_bump); 
        localStorage.setItem('dim_wout_bump', dim_wout_bump); 
        localStorage.setItem('drive_train', drive_train); 
        localStorage.setItem('weight', weight); 
        localStorage.setItem('intake_sty', intake_sty); 

       
        document.querySelectorAll('.checkboxes input[type="checkbox"]').forEach(checkbox => {
            localStorage.setItem(checkbox.name, checkbox.checked);
        });

        
    });

    teleopForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const ground = document.getElementById('ground').value;
        localStorage.setItem('ground', ground);
        const source = document.getElementById('source').value;
        localStorage.setItem('source', source);
        const speaker = document.getElementById('speaker').value;
        localStorage.setItem('speaker', speaker);
        const distance_shoot = document.getElementById('distance_shoot').value;
        localStorage.setItem('distance_shoot', distance_shoot);
        const amp = document.getElementById('amp').value;
        localStorage.setItem('amp', amp);
});

// autoNamesForm.addEventListener('submit', function(e) {
//     e.preventDefault();
//     const newItemsInput = document.getElementById('newItems');
//     const newItems = newItemsInput.value.split(' '); // Split input by spaces
//     checklistItems = checklistItems.concat(newItems); // Add new items to the global checklist items array
//    localStorage.setItem('autoNames', newItems)
//     newItemsInput.value = ''; // Clear the input field
// });

endGameForm.addEventListener('submit', function(e) {
  e.preventDefault();
  const climb = document.getElementById('climb').value
 localStorage.setItem('climb', climb)
 const harmony = document.getElementById('harmony').value
 localStorage.setItem('harmony', harmony)
});

// document.getElementById('addAutoName').addEventListener('click', function () {
//     const container = document.getElementById('autoNamesContainer');
//     const uniqueId = Date.now(); // Create a unique ID for matching label with input
//     const itemDiv = document.createElement('div');
//     itemDiv.className = 'autoItem';
//     itemDiv.innerHTML = `
//       <input type="text" placeholder="Auto Name" name="autoNames[]">
//       <input type="file" accept="image/*" name="autoImages[]" id="file-${uniqueId}" style="display: none;">
//       <label for="file-${uniqueId}" style="cursor: pointer;">Upload Image</label>
//       <img id="preview-${uniqueId}" style="display: none;" width="100" /> <!-- Placeholder for image preview -->
//   `;
//     container.appendChild(itemDiv);

//     // Add a change listener to this file input for image preview
//     document.getElementById(`file-${uniqueId}`).addEventListener('change', function (e) {
//       const file = e.target.files[0];
//       if (file) {
//         const reader = new FileReader();
//         reader.onload = function (e) {
//           const imgElement = document.getElementById(`preview-${uniqueId}`);
//           imgElement.src = e.target.result;
//           imgElement.style.display = 'block'; // Show image preview
//         };
//         reader.readAsDataURL(file);
//       }
//     });
//   });

function saveAutoNamesAndImages(e) {
    e.preventDefault();
    const autoNamesInputs = document.querySelectorAll('input[type="text"][name="autoNames[]"]');
    const autoImagesInputs = document.querySelectorAll('input[type="file"][name="autoImages[]"]');
    const autosData = [];

    autoNamesInputs.forEach((input, index) => {
        const fileInput = autoImagesInputs[index];
        const file = fileInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = function() {
                autosData.push({ name: input.value, image: reader.result });
                // Check if this is the last file to process
                if (autosData.length === autoNamesInputs.length) {
                    localStorage.setItem('autos', JSON.stringify(autosData));
                    console.log("1")
                    alert('Auto names and images saved to localStorage.');
                }
            };
            reader.readAsDataURL(file);
        } else {
            // Handle the case where an auto name is added without an image
            autosData.push({ name: input.value, image: '' });
            if (autosData.length === autoNamesInputs.length) {
                console.log("2")
                localStorage.setItem('autos', JSON.stringify(autosData));
                alert('Auto names and images saved to localStorage.');
            }
        }
    });

    if (autoNamesInputs.length === 0) {
        alert('Please add at least one auto name and image.');
    }
}

  document.getElementById('autoNamesForm').addEventListener('submit', function (e) {
    e.preventDefault();

    const autoNamesInputs = document.querySelectorAll('input[type="text"][name="autoNames[]"]');
    const autoImagesInputs = document.querySelectorAll('input[type="file"][name="autoImages[]"]');
    const autos = [];

    // Assuming each auto name has a corresponding image input
    autoNamesInputs.forEach((input, index) => {
      const file = autoImagesInputs[index].files[0];
      if (file) {
        const reader = new FileReader();
        reader.onloadend = function () {
          // Once file is loaded, save auto name and image as Base64 string
          autos.push({ name: input.value, image: reader.result });
          // Check if all files have been processed then save to localStorage
          if (autos.length === autoNamesInputs.length) {
            localStorage.setItem('autos', JSON.stringify(autos));
            alert('Auto names and images saved to localStorage.');
          }
        };
        reader.readAsDataURL(file);
      } else {
        // If no file was selected, still save the name with a placeholder for the image
        autos.push({ name: input.value, image: '' });
        if (autos.length === autoNamesInputs.length) {
          localStorage.setItem('autos', JSON.stringify(autos));
          alert('Auto names and images saved to localStorage.');
        }
      }
    });
  });
});
    </script>
</body>

</html>