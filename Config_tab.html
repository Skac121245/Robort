<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Configuration</title>
</head>

<body id="body">
    <h1 id="title">Team Configuration</h1>


    <nav id="nav" class="nav_con">
        <a href="./index.html">Home</a>
        <a href="./Team_List_element.html">Teams</a>
        <a href="./Strat_Board_w_tabs.html">Canvas</a>
        <a href="./preMatchChecklist.html">Pre Match Checklist</a>
        <a href="./Control_Panel.html">Control Panel</a>
        <a href="./2423_Features.html">Features</a>
        <a href="Config_tab.html">Configure</a>
    </nav>
<!-- <form id="darkModeForm">
    <h2>Dark Mode</h2>
    <div class="toggle">
        <input id="darkMode" type="checkbox"/>
        <label></label>
    </div>
</form> -->

    <form id="eventCodeForm">
        <h2>Event Code</h2>
        <label for="eventCode">What is the code for the event you are at?</label>
        <input type="text" id="eventCode" name="eventCode" required>

        <button type="submit">Save Just Event Code</button>

        
    </form>
    <div id="uploadArea">
        <h2>Upload a File</h2>
        <input type="file" id="fileInput">
        <button onclick="uploadFile()">Upload</button>
        <div id="fileName"></div>
    </div>
    
    <div id="fileContent"></div>

    <form id="teamForm">
        <h2>General Scouting Questions</h2>
        <label for="teamNumber">What is your team number?</label>
        <input type="number" id="teamNumber" name="teamNumber">

        <label for="robotName">What is the name of your robot?</label>
        <input type="text" id="robotName" name="robotName">

        <label for="dim_w_bump">What are your dimensions WITH bumpers? (inches)</label>
        <input type="text" id="dim_w_bump" name="dim_w_bump" placeholder="Example: X-dimension by Y-dimension">

        <label for="dim_wout_bump">What are your dimensions WITHOUT bumpers? (inches)</label>
        <input type="text" id="dim_wout_bump" name="dim_wout_bump" placeholder="Example: X-dimension by Y-dimension">

        <label for="drive_train">What is your type of Drivetrain?</label>
        <input type="text" id="drive_train" name="drive_train">

        <label for="weight">What is your robot weight? (LBS)</label>
        <input type="number" id="weight" name="weight">

        <h4>Intake Style</h4>
        <select id="intake_sty">
            <option value="Under the bumper">Under the bumper</option>
            <option value="Over bumper">Over bumper</option>
            <option value="Talk to a team member, it's hard to explain">Something Else</option>

        </select>

        <!-- <div class="checkbox">
           <h2>Where do you pick up from?</h2>
           <input type="checkbox" id="ground" name="ground">Ground<br>
           <input type="checkbox" name="source">Source<br>
      

           <h2>Where do you score?</h2>
           <input type="checkbox" name="speaker">Speaker<br>
           <input type="checkbox" name="distance_shoot">Can you shoot from distance?<br>
           <input type="checkbox" name="amp">Amp<br>
       </div> -->


        <button type="submit">Save</button>
    </form>

    <form id="autoNamesForm">
        <h2>Add Auto Names and Pictures</h2>
        <h5> (Square Images are Better)</h5>
        <div id="autoNamesContainer">
            <!-- Dynamic items will be added here -->
        </div>
        <button type="button" id="addAutoName">Add Auto Name</button>
        <button type="submit">Save</button>
    </form>

    <form id="teleopForm">
        <h2>Teleop Form</h2>
        <h4>Ground</h4>
        <select id="ground">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Source</h4>
        <select id="source">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Speaker</h4>
        <select id="speaker">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Can you shoot from distance?</h4>
        <select id="distance_shoot">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Amp</h4>
        <select id="amp">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>


        <button type="submit">Save</button>
    </form>

    <form id="endGameForm">
        <h2>Endgame Form</h2>
        <h4>Can you climb?</h4>
        <select id="climb">
            <option value="Yes">YES</option>
            <option value="No">NO</option>
        </select>

        <h4>Can you climb, not from the center? (Harmony)</h4>
        <select id="harmony">
            <option value="Yes">YES</option>
            <option value="It's possible">It's possible</option>
            <option value="No">NO</option>
        </select>


        <button type="submit">Save</button>
    </form>



    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #000000;
        }

        h1 {
            color: #000000;
            text-align: center;
        }

        h2 {
            
            font-weight: 600;
        }

        nav {
            background-color: #00ff2a;
            padding: 10px 0;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        nav a {
            color: rgb(0, 0, 0);
            text-decoration: none;
            font-size: 20px;
            font-weight: bold;
            padding: 10px 20px;
            display: inline-block;
            border-radius: 8px;
        }

        nav a:hover {
            background-color: #3295ff;
        }

        form {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            /* font-size: 30px; */
        }

        label {
            display: block;
            margin: 10px 0 5px;
        }

        input[type="number"],
        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            margin-top: 20px;
            margin-bottom: 0px;
        }

        button:hover {
            background-color: #45a049;
        }

        .nav_con {
            border-radius: 10px;
            max-width: 1000px;
            margin: auto;
            padding: 20px;
            text-align: center;
        }

        #teleopForm {
            font-weight: 800;
            font-size: 20px;
        }

        #endGameForm {
            font-size: 20px;
            font-weight: 800;
        }

        #autoNamesForm {
            font-size: 20px;
            font-weight: 800;
        }

        #teamForm {
            font-size: 20px;
            font-weight: 800;
        }

        #eventCodeForm {
            font-size: 20px;
            font-weight: 800;
        }

        select {
            font-size: 15px;
            font-weight: 600;
            border-radius: 4px;
            padding: 10px;
        }

        .toggle {
  position: relative;
  height: 32px;
  display: flex;
  align-items: center;
  box-sizing:border-box;
}
.toggle input[type="checkbox"] {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 10;
  width: 100%;
  height: 100%;
  cursor: pointer;
  opacity: 0;
}
.toggle label {
  position: relative;
  display: flex;
  height: 100%;
  align-items: center;
  box-sizing:border-box;
}
.toggle label:before {
  content: '';
  background: #ffa3a3;
  height: 32px;
  width: 94px;
  position: relative;
  display: inline-block;
  box-sizing:border-box;
  transition: 0.2s ease-in;
}
.toggle label:after {
  content: 'OFF';
  position: absolute;
  top: 4px;
  left: 4px;
  width: 42px;
  height: 24px;
  z-index: 2;
  display: grid;
  place-content: center;
  font-family: arial;
  font-weight: bold;
  box-sizing:border-box;
  color:#FFF;
  background: #ef3434;
  transition: 0.25s ease-in-out;
}

.toggle input[type="checkbox"]:checked + label:before {
  background: #c0e7e3;
}
.toggle input[type="checkbox"]:checked + label:after {
  content: 'ON';
  background: #21bf73;
  transform: translatex(44px);
}

#uploadArea {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  #fileContent { 
    white-space: pre-wrap; 
    margin-top: 20px; 
    border: 1px solid #ccc; 
    padding: 10px; 
    max-height: 300px; 
    max-width: 300px; 
    overflow: auto; 
  }
  #fileName { margin-top: 10px; }

    </style>
    <script>

function uploadFile() {
  const fileInput = document.getElementById('fileInput');
  if (fileInput.files.length === 0) {
    alert("Please select a file first.");
    return;
  }

  const file = fileInput.files[0];
  document.getElementById('fileName').innerText = `File Name: ${file.name}`;

  const reader = new FileReader();
  reader.onload = function(e) {
    document.getElementById('fileContent').innerText = e.target.result;
    localStorage.setItem('ApiDataUploaded', e.target.result)
  };
  reader.readAsText(file);
}

document.addEventListener('DOMContentLoaded', (event) => {
    document.getElementById('addAutoName').addEventListener('click', addAutoNameField);
    document.getElementById('autoNamesForm').addEventListener('submit', saveAutoNamesAndImages);
    let checklistItems = []
    const eventCodeForm = document.getElementById('eventCodeForm');
    const form = document.getElementById('teamForm');

    eventCodeForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const eventCode = document.getElementById('eventCode').value;
        localStorage.setItem('eventCode', eventCode); 

});



function addAutoNameField() {
    const container = document.getElementById('autoNamesContainer');
    const uniqueId = Date.now(); // Create a unique ID for matching label with input
    const itemDiv = document.createElement('div');
    itemDiv.className = 'autoItem';
    itemDiv.innerHTML = `
        <input type="text" placeholder="Auto Name" name="autoNames[]">
        <input type="file" accept="image/*" name="autoImages[]" id="file-${uniqueId}" style="display: none;">
        <label for="file-${uniqueId}" style="cursor: pointer;">Upload Image</label>
        <img id="preview-${uniqueId}" style="display: none;" width="100" /> <!-- Placeholder for image preview -->
    `;
    container.appendChild(itemDiv);

    document.getElementById(`file-${uniqueId}`).addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById(`preview-${uniqueId}`).src = e.target.result;
                document.getElementById(`preview-${uniqueId}`).style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    });
}
    form.addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent the form from submitting in the traditional way
        const teamNumber = document.getElementById('teamNumber').value;
        const dim_w_bump = document.getElementById('dim_w_bump').value;
        const dim_wout_bump = document.getElementById('dim_wout_bump').value;
        const drive_train = document.getElementById('drive_train').value;
        const weight = document.getElementById('weight').value;
        const intake_sty = document.getElementById('intake_sty').value;
        const robotName = document.getElementById('robotName').value;
      

        localStorage.setItem('teamNumber', teamNumber); 
        localStorage.setItem('dim_w_bump', dim_w_bump); 
        localStorage.setItem('dim_wout_bump', dim_wout_bump); 
        localStorage.setItem('drive_train', drive_train); 
        localStorage.setItem('weight', weight); 
        localStorage.setItem('intake_sty', intake_sty); 
        localStorage.setItem('robotName', robotName); 


       
        
        
    });
    document.getElementById('darkMode').addEventListener('change', function() {
        var darkMode = document.getElementById('darkMode');
        if (darkMode.checked) {
            localStorage.setItem('darkMode', true)
            document.getElementById('body').style.backgroundColor = '#404040';
            document.getElementById('teamForm').style.backgroundColor = '#404040';
            document.getElementById('autoNamesForm').style.backgroundColor = '#404040';
            document.getElementById('darkModeForm').style.backgroundColor = '#404040';
            document.getElementById('eventCodeForm').style.backgroundColor = '#404040';
            document.getElementById('teleopForm').style.backgroundColor = '#404040';
            document.getElementById('endGameForm').style.backgroundColor = '#404040';
            document.getElementById('title').style.color = '#ffffff';
            document.getElementById('nav').style.backgroundColor = '#009c1a';


        } else {
            localStorage.setItem('darkMode', false)
            document.getElementById('body').style.backgroundColor = '#f4f4f4';
            document.getElementById('teamForm').style.backgroundColor = '#f4f4f4';
            document.getElementById('autoNamesForm').style.backgroundColor = '#f4f4f4';
            document.getElementById('darkModeForm').style.backgroundColor = '#f4f4f4';
            document.getElementById('teleopForm').style.backgroundColor = '#f4f4f4';
            document.getElementById('endGameForm').style.backgroundColor = '#f4f4f4';
            document.getElementById('eventCodeForm').style.backgroundColor = '#f4f4f4';
            document.getElementById('title').style.color = 'black';
            document.getElementById('nav').style.backgroundColor = '#00ff2a';

            
        }
    });

   
    });
    teleopForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const ground = document.getElementById('ground').value;
        localStorage.setItem('ground', ground);
        const source = document.getElementById('source').value;
        localStorage.setItem('source', source);
        const speaker = document.getElementById('speaker').value;
        localStorage.setItem('speaker', speaker);
        const distance_shoot = document.getElementById('distance_shoot').value;
        localStorage.setItem('distance_shoot', distance_shoot);
        const amp = document.getElementById('amp').value;
        localStorage.setItem('amp', amp);
});

// autoNamesForm.addEventListener('submit', function(e) {
//     e.preventDefault();
//     const newItemsInput = document.getElementById('newItems');
//     const newItems = newItemsInput.value.split(' '); // Split input by spaces
//     checklistItems = checklistItems.concat(newItems); // Add new items to the global checklist items array
//    localStorage.setItem('autoNames', newItems)
//     newItemsInput.value = ''; // Clear the input field
// });

endGameForm.addEventListener('submit', function(e) {
  e.preventDefault();
  const climb = document.getElementById('climb').value
 localStorage.setItem('climb', climb)
 const harmony = document.getElementById('harmony').value
 localStorage.setItem('harmony', harmony)
});

// document.getElementById('addAutoName').addEventListener('click', function () {
//     const container = document.getElementById('autoNamesContainer');
//     const uniqueId = Date.now(); // Create a unique ID for matching label with input
//     const itemDiv = document.createElement('div');
//     itemDiv.className = 'autoItem';
//     itemDiv.innerHTML = `
//       <input type="text" placeholder="Auto Name" name="autoNames[]">
//       <input type="file" accept="image/*" name="autoImages[]" id="file-${uniqueId}" style="display: none;">
//       <label for="file-${uniqueId}" style="cursor: pointer;">Upload Image</label>
//       <img id="preview-${uniqueId}" style="display: none;" width="100" /> <!-- Placeholder for image preview -->
//   `;
//     container.appendChild(itemDiv);

//     // Add a change listener to this file input for image preview
//     document.getElementById(`file-${uniqueId}`).addEventListener('change', function (e) {
//       const file = e.target.files[0];
//       if (file) {
//         const reader = new FileReader();
//         reader.onload = function (e) {
//           const imgElement = document.getElementById(`preview-${uniqueId}`);
//           imgElement.src = e.target.result;
//           imgElement.style.display = 'block'; // Show image preview
//         };
//         reader.readAsDataURL(file);
//       }
//     });
//   });

function saveAutoNamesAndImages(e) {
    e.preventDefault();
    const autoNamesInputs = document.querySelectorAll('input[type="text"][name="autoNames[]"]');
    const autoImagesInputs = document.querySelectorAll('input[type="file"][name="autoImages[]"]');
    const autosData = [];

    autoNamesInputs.forEach((input, index) => {
        const fileInput = autoImagesInputs[index];
        const file = fileInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = function() {
                autosData.push({ name: input.value, image: reader.result });
                // Check if this is the last file to process
                if (autosData.length === autoNamesInputs.length) {
                    localStorage.setItem('autos', JSON.stringify(autosData));
                    console.log("1")
                    alert('Auto names and images saved to localStorage.');
                }
            };
            reader.readAsDataURL(file);
        } else {
            // Handle the case where an auto name is added without an image
            autosData.push({ name: input.value, image: '' });
            if (autosData.length === autoNamesInputs.length) {
                console.log("2")
                localStorage.setItem('autos', JSON.stringify(autosData));
                alert('Auto names and images saved to localStorage.');
            }
        }
    });

    if (autoNamesInputs.length === 0) {
        alert('Please add at least one auto name and image.');
    }
}

  document.getElementById('autoNamesForm').addEventListener('submit', function (e) {
    e.preventDefault();

    const autoNamesInputs = document.querySelectorAll('input[type="text"][name="autoNames[]"]');
    const autoImagesInputs = document.querySelectorAll('input[type="file"][name="autoImages[]"]');
    const autos = [];

    // Assuming each auto name has a corresponding image input
    autoNamesInputs.forEach((input, index) => {
      const file = autoImagesInputs[index].files[0];
      if (file) {
        const reader = new FileReader();
        reader.onloadend = function () {
          // Once file is loaded, save auto name and image as Base64 string
          autos.push({ name: input.value, image: reader.result });
          // Check if all files have been processed then save to localStorage
          if (autos.length === autoNamesInputs.length) {
            localStorage.setItem('autos', JSON.stringify(autos));
            alert('Auto names and images saved to localStorage.');
          }
        };
        reader.readAsDataURL(file);
      } else {
        // If no file was selected, still save the name with a placeholder for the image
        autos.push({ name: input.value, image: '' });
        if (autos.length === autoNamesInputs.length) {
          localStorage.setItem('autos', JSON.stringify(autos));
          alert('Auto names and images saved to localStorage.');
        }
      }
    });
  });
    </script>
</body>

</html>