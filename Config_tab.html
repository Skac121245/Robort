<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="jquery-3.3.1.slim.min.js"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <script src="showdown.min.js"></script>
    <title>Robort</title>
    <style>
           #aboutTabsContent > .tab-pane {
    padding-top: 20px; /* Add space above the content in each tab */
}
  body, nav, header, .navbar, #footer, .card-body, form {
    transition: background-color 0.3s ease, color 0.3s ease;
}
body {
    background-color: #343a40;
    display: block;
}
        .disabled-form {
    pointer-events: none; /* Disables interactions */
    opacity: 0.5; /* Grey out the appearance */
        }
/* Ensure uniform size and margin for buttons and labels */
.button-wrapper button {
    margin: 0 !important;
    height: 38px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}
/* Dark Mode Toggle Switch Styles */
.switch {
  position: relative;
  display: inline-block;
  width: 80px; 
  height: 34px;
  margin: 10px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: background-color .4s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: transform .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #555; /* Dark mode slider color */
}

input:checked + .slider:before {
  transform: translateX(46px); /* Slide to the right */
}

.icon {
  color: #fff;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 20px;
  transition: opacity 0.4s; /* Smooth transition for opacity */
}

.sun {
  left: 10px;
  opacity: 0; /* Start hidden */
}

.moon {
  right: 10px;
  opacity: 1; /* Start visible */
}

input:checked + .slider .sun {
  opacity: 1; /* Fade in when dark mode is on */
}

input:checked + .slider .moon {
  opacity: 0; /* Fade out when dark mode is on */
}

input:not(:checked) + .slider .sun {
  opacity: 0; /* Remain hidden when light mode is on */
}

input:not(:checked) + .slider .moon {
  opacity: 1; /* Remain visible when light mode is on */
}


body.bg-dark #patch-notes div, #patch-notes h1, #patch-notes h2, #patch-notes li, #patch-notes h3, #patch-notes p, #patch-notes a, #patch-notes h4, #aboutTabsContent, #featureForm label, #bugForm label {
    color: #343a40 !important; /* Sets the text color for all content within the patch-notes container */
}




/* Base styles for dark mode - enhancing specific elements */
.bg-dark, .navbar-dark, .card {
  background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}

/* Specific styles for text elements */
.bg-dark li, .bg-dark div {
  color: #f8f9fa !important; /* Ensure text color is light in dark mode */
}

.bg-dark .card-header, .bg-dark .card {
  background-color: #2c3035 !important; /* Slightly lighter gray for card headers */
  border-color: #484e55 !important; /* Darker borders for better visual separation */
}


/* Base styles for light mode */
.bg-light, .navbar-light {
  background-color: #f8f9fa !important; /* Light gray background */
  color: #343a40 !important; /* Dark text for readability */
}

/* Specific styles for text elements in light mode */
.bg-light label, .bg-light li, .bg-light div {
  color: #343a40 !important; /* Ensure text color is dark in light mode */
}

.bg-light .card-header, .bg-light .card {
  background-color: #ffffff !important; /* White for card headers */
  border-color: #cccccc !important; /* Light borders for a subtle look */
}

/* Enhanced specific selectors for navbar in dark mode */
.navbar-dark {
    background-color: #343a40 !important; /* Dark gray background */
    color: #f8f9fa !important; /* Light text for readability */
}

.navbar-dark .navbar-nav .nav-link {
    color: #f8f9fa !important; /* Ensure navbar text colors are adjusted for dark mode */
}

body.bg-dark p, h5 {
    color: #343a40
}

.navbar-dark .navbar-brand {
    color: #f8f9fa !important; /* Ensure brand text is visible in dark mode */
}

.navbar-dark .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='rgba(248, 249, 250, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
}
body.bg-dark .dropdown-item {
    background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}
body.bg-dark .dropdown-item:hover {
    background-color: #f8f9fa !important; /* Light gray background */
  color: #343a40 !important; /* Dark text for readability */
}
body.bg-dark .dropdown-menu {
    background-color:  #343a40 !important; /* Light gray background */
}

.nav-link.active {
  color: #343a40 !important;
}

.autoItem {
    margin-bottom: 20px; /* Adds more space between each auto item */
}

#autoNamesContainer {
    margin-bottom: 30px; /* Adds more space between the container of autos and the next content block */
}

  </style>
<script>
                document.addEventListener("DOMContentLoaded", function() {
                    document.body.style.display = "none"; // Hide body as soon as DOM is ready but not fully loaded
                });
            </script>
</head>

<body>

    <nav class="navbar navbar-expand-lg shadow-sm mb-4">
        <div class="container">
            <a class="navbar-brand" href="#" id="roborte">Robort</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./Team_List_element.html">Teams</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Scouting
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="./Strat_Board_w_tabs.html">Canvas</a>
                            <a class="dropdown-item" href="./scoutingGen.html">Scouting Generator</a>
                            
                            <a class="dropdown-item" href="./pitScouterFRONT.html">Pit Scouter</a>
                            <a class="dropdown-item" href="./pitScouterBACK.html">Pit Scouter Backend</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./Checklist.html">Pre Match Checklist</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./2423_Features.html">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Config_tab.html">Configure</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="dataBaseTeamPage.html">Database</a>
                    </li>
                      <li class="nav-item">
                        <a class="nav-link" href="scoutingUI.html">ScoutingUI</a>
                    </li>
                </ul>
                <label class="switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="slider round">
                      <span class="icon sun">ðŸŒž</span> <!-- More natural sun icon -->
                      <span class="icon moon">ðŸŒœ</span> <!-- More natural moon icon -->
                    </span>
                  </label>
                  
            </div>
        </div>
    </nav>

    <div class="container">
        <h1 class="text-center my-4">Team Configuration</h1>
    
        <div class="row">
            <div class="col-lg-12 mb-4">
                <div class="card">
                    <div class="card-header">
                        Event Code
                    </div>
                    <div class="card-body">
                        <div id="offlineMessage" class="alert alert-warning" style="display: none;">You need to be online to change event codes.</div>
                        <form id="eventCodeForm">
                            <div class="form-group">
                                <label for="eventCode">What is the code for the event you are at?</label>
                                <input type="text" id="eventCode" name="eventCode" class="form-control bg-dark" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Just Event Code</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="card mb-4">
                    <div class="card-header">
                        Competition Settings
                    </div>
                    <div class="card-body">
                        <form id="compForm">
                            <div class="form-group">
                                <label for="compOption">What competition season would you like to use?</label>
                                <select id="compOption" class="form-control bg-dark">
                                    <option value="Crescendo">2024 - Crescendo</option>
                                    <option value="Reefscape">2025 - Reefscape</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 mb-4">
                <div class="card">
                    <div class="card-header">
                        General Scouting Questions
                    </div>
                    <div class="card-body">
                        <form id="teamForm">
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="teamNumber">What is your team number?</label>
                                    <input type="number" id="teamNumber" name="teamNumber" class="form-control bg-dark">
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="robotName">What is the name of your robot?</label>
                                    <input type="text" id="robotName" name="robotName" class="form-control bg-dark">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dim_w_bump">What are your dimensions WITH bumpers? (inches)</label>
                                <input type="text" id="dim_w_bump" name="dim_w_bump" class="form-control bg-dark" placeholder="Example: X-dimension by Y-dimension">
                            </div>
                            <div class="form-group">
                                <label for="dim_wout_bump">What are your dimensions WITHOUT bumpers? (inches)</label>
                                <input type="text" id="dim_wout_bump" name="dim_wout_bump" class="form-control bg-dark" placeholder="Example: X-dimension by Y-dimension">
                            </div>
                            <div class="form-group">
                                <label for="drive_train">What is your type of Drivetrain?</label>
                                <input type="text" id="drive_train" name="drive_train" class="form-control bg-dark">
                            </div>
                            <div class="form-group">
                                <label for="weight">What is your robot weight? (LBS)</label>
                                <input type="number" id="weight" name="weight" class="form-control bg-dark">
                            </div>
                            <div class="form-group">
                                <label>Intake Style</label>
                                <select id="intake_sty" class="form-control bg-dark">
                                    <option value="Under the bumper">Under the bumper</option>
                                    <option value="Over bumper">Over bumper</option>
                                    <option value="Talk to a team member, it's hard to explain">Something Else</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    
        <div class="row">
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        Auto Names and Pictures
                    </div>
                    <div class="card-body">
                        <form id="autoNamesForm">
                            <div id="autoNamesContainer" class="mb-3">
                                <!-- Dynamic items will be added here -->
                            </div>
                            <div class="button-wrapper">
                            <button type="button" id="addAutoName" class="btn btn-info mb-2">Add Auto Name</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
    
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        Teleop Form
                    </div>
                    <div class="card-body">
                        <form id="teleopForm">
                            <div class="form-group">
                                <label>Ground</label>
                                <select id="ground" class="form-control bg-dark">
                                    <option value="Yes">YES</option>
                                    <option value="No">NO</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Source</label>
                                <select id="source" class="form-control bg-dark">
                                    <option value="Yes">YES</option>
                                    <option value="No">NO</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Speaker</label>
                                <select id="speaker" class="form-control bg-dark">
                                    <option value="Yes">YES</option>
                                    <option value="No">NO</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Can you shoot from distance?</label>
                                <select id="distance_shoot" class="form-control bg-dark">
                                    <option value="Yes">YES</option>
                                    <option value="No">NO</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Amp</label>
                                <select id="amp" class="form-control bg-dark">
                                    <option value="Yes">YES</option>
                                    <option value="No">NO</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    
        <div class="row">
            <div class="col-lg-12">
                <div class="card mb-4">
                    <div class="card-header">
                        Endgame Form
                    </div>
                    <div class="card-body">
                        <form id="endGameForm">
                            <div class="form-group">
                                <label>Can you climb?</label>
                                <select id="climb" class="form-control bg-dark">
                                    <option value="Yes">YES</option>
                                    <option value="No">NO</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Can you climb, not from the center? (Harmony)</label>
                                <select id="harmony" class="form-control bg-dark">
                                    <option value="Yes">YES</option>
                                    <option value="It's possible">It's possible</option>
                                    <option value="No">NO</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- Closing container div -->
    <!-- Modal -->
<div class="modal fade" id="customAlertModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalLabel">Alert</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p id="modalText">This is a modal replacing an alert.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
   <!-- About the Project Modal -->
   <div id="aboutModal" class="modal text-center modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="aboutTabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="about" aria-selected="true">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="patch-notes-tab" data-toggle="tab" href="#patch-notes" role="tab" aria-controls="patch-notes" aria-selected="false">Patch Notes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="feedback-tab" data-toggle="tab" href="#feedback" role="tab" aria-controls="feedback" aria-selected="false">Feedback</a>
                    </li>
                </ul>
                <div class="tab-content" id="aboutTabsContent">
                    <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                        <h2 style="color: #343a40 !important">Robort</h2>
                        <h4 style="color: #343a40 !important">The ultimate in FRC competition gear</h4>
                        <h5>Co-developed by Ben Skraly and Toba Banjo</h5>
                        <p>Whether you're preparing to scout a heated match, sharing information about your team, or analyzing other robots, Robort has got you covered. Complete with modular design and accessible systems, it's the best tool both on and off the field.</p>
                        <span>&copy; <script>document.write(new Date().getFullYear());</script> Watertown High School Robotics</span>
                    </div>
                    <div class="tab-pane fade" id="patch-notes" role="tabpanel" aria-labelledby="patch-notes-tab">
                        <!-- Patch notes will be populated here by JavaScript -->
                    </div>
                    <div class="tab-pane fade" id="feedback" role="tabpanel" aria-labelledby="feedback-tab">
                        <form id="feedbackForm">
                            <div class="form-group">
                                <label for="feedbackType" style="color: #343a40 !important">Select Feedback Type:</label>
                                <select class="form-control" id="feedbackType" onchange="toggleFeedbackForm()">
                                    <option value="feature">Feature Suggestion</option>
                                    <option value="bug">Bug Report</option>
                                </select>
                            </div>
                            <!-- Feature Suggestion Form -->
                            <div id="featureForm" style="display: block;">
                                <div class="form-group">
                                    <label>Feature Area: <label style="color:red !important">*</label></label>
                                    <div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="featureArea" id="statistics" value="Statistics/Data">
                                            <label class="form-check-label" for="statistics">Statistics/Data</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="featureArea" id="scouting" value="Scouting">
                                            <label class="form-check-label" for="scouting">Scouting</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="featureArea" id="quality" value="Quality of Life">
                                            <label class="form-check-label" for="quality">Quality of Life</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="featureArea" id="other" value="Other">
                                            <label class="form-check-label" for="other">Other</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="featureDescription">Description:</label>
                                    <textarea class="form-control" id="featureDescription" rows="3"></textarea>
                                </div>
                            </div>
                            <!-- Bug Report Form -->
                            <div id="bugForm" style="display: none;">
                                <div class="form-group">
                                    <label for="bugTitle">Title:</label>
                                    <input type="text" class="form-control" id="bugTitle">
                                </div>
                                <div class="form-group">
                                    <label for="bugSummary">Issue Summary:</label>
                                    <textarea class="form-control" id="bugSummary" rows="2"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="bugSteps">Steps to Reproduce:</label>
                                    <textarea class="form-control" id="bugSteps" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="bugResults">Expected vs. Actual Results:</label>
                                    <textarea class="form-control" id="bugResults" rows="2"></textarea>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </form>
                    </div>                    
                </div>
            </div>
        </div>
    </div>
</div>

    
    

    <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="jquery-3.3.1.slim.min.js"></script>
    <script src="bootstrap.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
  const originalAlert = window.alert;
  
  window.alert = function(message) {
    $('#modalText').text(message); // Set the text of the modal to the alert message
    $('#customAlertModal').modal('show'); // Show the Bootstrap modal
  };
});

        document.addEventListener('DOMContentLoaded', (event) => {
    // Set the event code input placeholder to the last saved event code if it exists
    const lastEventCode = localStorage.getItem('eventCode');
    const eventCodeInput = document.getElementById('eventCode');
    if (lastEventCode) {
        eventCodeInput.placeholder = lastEventCode;
    }
});

        // function showMomAlert() {
        //     alert("Purple color chosen by my mother");
        // }
    
        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput.files.length === 0) {
                alert("Please select a file first.");
                return;
            }
            const file = fileInput.files[0];
            document.getElementById('fileName').innerText = `File Name: ${file.name}`;
    
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('fileContent').innerText = e.target.result;
                localStorage.setItem('ApiDataUploaded', e.target.result);
            };
            reader.readAsText(file);
        }
    
        document.addEventListener('DOMContentLoaded', (event) => {
            document.getElementById('addAutoName').addEventListener('click', addAutoNameField);
            // document.getElementById('autoNamesForm').addEventListener('submit', saveAutoNamesAndImages);
    
            document.getElementById('eventCodeForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const eventCode = document.getElementById('eventCode').value;
                localStorage.setItem('eventCode', eventCode);
                alert('Event code saved.');
            });

            document.getElementById('compForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const compOption = document.getElementById('compOption').value;
                localStorage.setItem('compOption', compOption);
                alert('Competition settings saved.');
            });
    
           document.getElementById('teamForm').addEventListener('submit', function(e) {
    e.preventDefault(); // Stop the form from submitting the traditional way

    const teamNumber = document.getElementById('teamNumber').value;
    const robotName = document.getElementById('robotName').value;
    const dim_w_bump = document.getElementById('dim_w_bump').value;
    const dim_wout_bump = document.getElementById('dim_wout_bump').value;
    const drive_train = document.getElementById('drive_train').value;
    const weight = document.getElementById('weight').value;
    const intake_sty = document.getElementById('intake_sty').value;

    localStorage.setItem('teamNumber', teamNumber); 
        localStorage.setItem('dim_w_bump', dim_w_bump); 
        localStorage.setItem('dim_wout_bump', dim_wout_bump); 
        localStorage.setItem('drive_train', drive_train); 
        localStorage.setItem('weight', weight); 
        localStorage.setItem('intake_sty', intake_sty); 
        localStorage.setItem('robotName', robotName); 
        
    alert('Team information saved.');
});
    
            document.getElementById('teleopForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const ground = document.getElementById('ground').value
                localStorage.setItem('ground', ground);
                const source = document.getElementById('source').value
                localStorage.setItem('source', source);
                const speaker = document.getElementById('speaker').value
                localStorage.setItem('speaker', speaker);
                const distance_shoot = document.getElementById('distance_shoot').value
                localStorage.setItem('distance_shoot', distance_shoot);
                const amp = document.getElementById('amp').value
                localStorage.setItem('amp', amp);
                alert('Teleop data saved.');
            });
    
            endGameForm.addEventListener('submit', function(e) {
  e.preventDefault();
  const climb = document.getElementById('climb').value
 localStorage.setItem('climb', climb)
 const harmony = document.getElementById('harmony').value
 localStorage.setItem('harmony', harmony)
 alert('Endgame data saved.');
});
        });
    
        function addAutoNameField() {
    const container = document.getElementById('autoNamesContainer');
    const uniqueId = Date.now();  // Using current timestamp as a simple unique ID
    const itemDiv = document.createElement('div');
    itemDiv.className = 'autoItem';
    itemDiv.id = 'auto-' + uniqueId;
    itemDiv.innerHTML = `
        <input type="text" placeholder="Auto Name" id="name-${uniqueId}" class="form-control mb-2">
        <button type="button" onclick="removeAuto('${uniqueId}')" class="btn btn-danger">Remove</button>
        <button type="button" onclick="changeImage('${uniqueId}')" class="btn btn-secondary">Change Image</button>
        <button type="button" onclick="saveChanges('${uniqueId}')" id="save-${uniqueId}" class="btn btn-success" style="display: none;">Save Changes</button>
        <br><img id="preview-${uniqueId}" src="" style="max-width: 100%; height: auto;" class="img-thumbnail mt-2"/>
    `;
    container.appendChild(itemDiv);
}


       document.addEventListener('DOMContentLoaded', function() {
    const autos = JSON.parse(localStorage.getItem('autos')) || [];
    displayExistingAutos(autos);
});


function displayExistingAutos(autos) {
    const container = document.getElementById('autoNamesContainer');
    autos.forEach(auto => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'autoItem';
        itemDiv.id = 'auto-' + auto.id;
        itemDiv.innerHTML = `
            <input type="text" value="${auto.name}" id="name-${auto.id}" class="form-control mb-2"/>
            <button type="button" onclick="removeAuto('${auto.id}')" class="btn btn-danger">Remove</button>
            <button type="button" onclick="changeImage('${auto.id}')" class="btn btn-secondary">Change Image</button>
            <button type="button" onclick="saveChanges('${auto.id}')" id="save-${auto.id}" class="btn btn-success" style="display: none;">Save Changes</button>
            <br><img id="preview-${auto.id}" src="${auto.image}" style="max-width: 100%; height: auto;" class="img-thumbnail mt-2"/>
        `;
        container.appendChild(itemDiv);

        // Ensure the element exists before adding an event listener
        const nameInput = document.getElementById(`name-${auto.id}`);
        const saveButton = document.getElementById(`save-${auto.id}`);
        if (nameInput && saveButton) {
            nameInput.addEventListener('input', function() {
                saveButton.style.display = 'inline'; // Show the save button when there are changes
            });
        } else {
            console.error('Error: Save button or name input field not found for auto ID', auto.id);
        }
    });
}


        // function saveAutoNamesAndImages(e) {
        //     e.preventDefault();
        //     const autoNamesInputs = document.querySelectorAll('input[type="text"][name="autoNames[]"]');
        //     const autoImagesInputs = document.querySelectorAll('input[type="file"][name="autoImages[]"]');
        //     const autosData = [];
    
        //     autoNamesInputs.forEach((input, index) => {
        //         const fileInput = autoImagesInputs[index];
        //         const file = fileInput.files[0];
        //         if (file) {
        //             const reader = new FileReader();
        //             reader.onloadend = function() {
        //                 autosData.push({ name: input.value, image: reader.result });
        //                 if (autosData.length === autoNamesInputs.length) {
        //                     localStorage.setItem('autos', JSON.stringify(autosData));
        //                     alert('Auto names and images saved to localStorage.');
        //                 }
        //             };
        //             reader.readAsDataURL(file);
        //         } else {
        //             autosData.push({ name: input.value, image: '' });
        //             if (autosData.length === autoNamesInputs.length) {
        //                 localStorage.setItem('autos', JSON.stringify(autosData));
        //                 alert('Auto names and images saved to localStorage.');
        //             }
        //         }
        //     });
    
        //     if (autoNamesInputs.length === 0) {
        //         alert('Please add at least one auto name and image.');
        //     }
        // }

        function removeAuto(autoId) {
    console.log('Attempting to remove auto with ID:', autoId);
    const autoElement = document.getElementById(`auto-${autoId}`);
    console.log('Element found:', autoElement);

    if (autoElement) {
        autoElement.remove();  // Remove the auto element from the DOM
        const autos = JSON.parse(localStorage.getItem('autos')) || [];
        const remainingAutos = autos.filter(auto => auto.id !== autoId);
        localStorage.setItem('autos', JSON.stringify(remainingAutos));
        alert('Auto removed successfully.');
    } else {
        alert('Failed to remove auto. Auto not found.');
    }
}



function changeImage(autoId) {
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'image/*';
    fileInput.onchange = e => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const preview = document.getElementById(`preview-${autoId}`);
                if (preview) {
                    preview.src = event.target.result;
                    document.getElementById(`save-${autoId}`).style.display = 'inline'; // Show save button
                }
            };
            reader.readAsDataURL(file);
        }
    };
    fileInput.click();
}


function saveChanges(autoId) {
    const nameInput = document.getElementById(`name-${autoId}`);
    const previewImage = document.getElementById(`preview-${autoId}`);

    if (nameInput && previewImage) {
        const autos = JSON.parse(localStorage.getItem('autos')) || [];
        const autoIndex = autos.findIndex(auto => auto.id === autoId);

        if (autoIndex !== -1) {
            autos[autoIndex].name = nameInput.value;
            autos[autoIndex].image = previewImage.src;  // Ensure this captures the new image
        } else {
            // If auto doesn't exist, add it new
            autos.push({
                id: autoId,
                name: nameInput.value,
                image: previewImage.src
            });
        }
        localStorage.setItem('autos', JSON.stringify(autos));
        alert('Changes have been saved successfully.');
    } else {
        alert('Failed to find auto data fields.');
    }
}



//         document.addEventListener('DOMContentLoaded', function() {
//     const form = document.getElementById('eventCodeForm');
//     const message = document.getElementById('offlineMessage');

//     const dns = require('dns');

// function checkNetworkConnectivity() {
//     dns.resolve('www.google.com', (err) => {
//         if (err) {
//             form.classList.add('disabled-form');
//             message.style.display = 'block';
//         } else {
//             form.classList.remove('disabled-form');
//             message.style.display = 'none';
//         }
//     });
// }

//     // Check connectivity on initial load and periodically thereafter
//     checkConnectivity();
//     setInterval(checkConnectivity, 5000); // Check every 5 seconds

//     // Optional: Handle manual retry or other logic
//     form.addEventListener('submit', function(event) {
//         if (form.classList.contains('disabled-form')) {
//             event.preventDefault();
//             alert("Cannot submit while offline. Please check your connection and try again.");
//         }
//     });
// });

    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
  const toggle = document.getElementById('darkModeToggle');
  const body = document.body;
  const navbar = document.querySelector('.navbar'); // Select the navbar element
  const formControl = document.querySelector('form-control'); 

  // Function to apply dark mode classes
  function enableDarkMode() {
    body.classList.add('bg-dark');
    body.classList.remove('bg-light');
    navbar.classList.add('navbar-dark');
    navbar.classList.remove('navbar-light', 'bg-white'); // Explicitly remove 'bg-white' if it's set by Bootstrap
    document.querySelectorAll('.navbar').forEach(element => {
      element.classList.add('bg-dark');
      element.classList.remove('bg-white');
    });
    document.querySelectorAll('.form-control').forEach(element => {
      element.classList.add('bg-dark');
      element.classList.remove('bg-white');
    });
  }

  // Function to remove dark mode classes
  function disableDarkMode() {
    body.classList.add('bg-light');
    body.classList.remove('bg-dark');
    navbar.classList.add('navbar-light');
    navbar.classList.remove('navbar-dark', 'bg-dark'); // Remove 'bg-dark' if it was added
    document.querySelectorAll('.navbar').forEach(element => {
      element.classList.add('bg-white');
      element.classList.remove('bg-dark');
    });
    document.querySelectorAll('.form-control').forEach(element => {
      element.classList.remove('bg-dark');
      element.classList.add('bg-white');
    });
  }

  // Initialize dark mode from local storage
  if (localStorage.getItem('darkMode') === 'true') {
    enableDarkMode();
    toggle.checked = true;
  } else {
    disableDarkMode();
  }
  body.style.display = 'block';
  // Toggle dark mode on change
  toggle.addEventListener('change', function() {
    if (this.checked) {
      localStorage.setItem('darkMode', 'true');
      enableDarkMode();
    } else {
      localStorage.setItem('darkMode', 'false');
      disableDarkMode();
    }
  });
});
document.getElementById('roborte').addEventListener('click', function() {
    $('#aboutModal').modal('show');
});

// Fetch and display GitHub release notes with markdown parsing and specific download link
function loadGitHubReleases() {
    const apiUrl = 'https://api.github.com/repos/skac121245/Robort/releases';
    const converter = new showdown.Converter(); // Initialize markdown converter
    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('patch-notes');
            container.innerHTML = ''; // Clear existing content
            data.forEach(release => {
                if (release.body !== null) { // Only display if there's a description
                    const markdownHTML = converter.makeHtml(release.body);
                    const releaseDiv = document.createElement('div');
                    releaseDiv.innerHTML = `
                        <h3>${release.tag_name}</h3>
                        <div>${markdownHTML}</div>
                        <a href="${release.html_url}" target="_blank">View on GitHub</a>
                        <hr>`;
                    container.appendChild(releaseDiv);
                }
            });
        })
        .catch(error => console.error('Error fetching GitHub releases:', error));
}



document.getElementById('patch-notes-tab').addEventListener('click', function() {
    loadGitHubReleases();
});

document.getElementById('feedbackForm').addEventListener('submit', async function(event) {
    event.preventDefault();  // Prevent the default form submission behavior
    const feedbackType = document.getElementById('feedbackType').value;
    let postData = {
        username: "Robort Feedback Bot",
        embeds: [],
    };

    if (feedbackType === 'feature') {
        const area = document.querySelector('input[name="featureArea"]:checked').value;
        const description = document.getElementById('featureDescription').value;
        postData.embeds.push({
            title: "Feature Suggestion",
            fields: [
                { name: "Area", value: area, inline: true },
                { name: "Description", value: description }
            ],
            color: 65280  // Green
        });
    } else {
        const title = document.getElementById('bugTitle').value;
        const summary = document.getElementById('bugSummary').value;
        const steps = document.getElementById('bugSteps').value;
        const results = document.getElementById('bugResults').value;
        postData.embeds.push({
            title: "Bug Report: " + title,
            fields: [
                { name: "Summary", value: summary },
                { name: "Steps to Reproduce", value: steps },
                { name: "Expected vs. Actual Results", value: results }
            ],
            color: 16711680  // Red
        });
    }

    try {
        const response = await fetch('https://discord.com/api/webhooks/1231365349476405268/lX0MXxHO2zwQPnNxEiuConQ8Sf47Qwq4EDrE8mLV8pctu3c63VQBjnsjAwlGLK2DPeLm', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(postData)
        });
        if (response.ok) {
            alert('Feedback submitted successfully!');
            document.getElementById('feedbackForm').reset();  // Reset the form after successful submission
        } else {
            alert('Failed to submit feedback. Please try again.');
        }
    } catch (error) {
        console.error('Error submitting feedback:', error);
        alert('Error submitting feedback. Please check your network connection and try again.');
    }
});

function toggleFeedbackForm() {
    const feedbackType = document.getElementById('feedbackType').value;
    if (feedbackType === 'feature') {
        document.getElementById('featureForm').style.display = 'block';
        document.getElementById('bugForm').style.display = 'none';
    } else {
        document.getElementById('featureForm').style.display = 'none';
        document.getElementById('bugForm').style.display = 'block';
    }
}

    </script>
     <script>
        window.onload = function() {
            document.body.style.display = "block"; // Show body when everything is loaded
        };
    </script>
</body>
</html>
