<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robort</title>
    <script src="jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <!-- Bootstrap CSS -->
    <link href="bootstrap.min.css" rel="stylesheet">
    <script src="showdown.min.js"></script>

    <style>
        #aboutTabsContent > .tab-pane {
    padding-top: 20px; /* Add space above the content in each tab */
}

          body, nav, header, .navbar, #footer, a {
    transition: background-color 0.3s ease, color 0.3s ease;
}
        body {
            background-color: #343a40; /* Lighter shade */
            color: #212529; /* Bootstrap default font color */
            display: block; 
        }
        header, .hamburger-menu .bar, nav {
            transition: all 0s ease; /* Smooth transition for all */
        }
       
        #lcd-container {
           padding: 0px;
            border-radius: 10px;
            width: 100%;
            margin: auto;
            overflow: auto;
        }

        .digit {
            display: inline-block;
            width: 50px;
            height: 100px;
            position: relative;
            margin: 5px;
        }

        .segment {
            position: absolute;
            opacity: 0.075;
            background-color: rgb(255, 0, 0);
        }

        .lit {
            opacity: 1 !important;
            background-color: red !important;
        }

        .horizontal {
            width: 40px;
            height: 10px;
        }

        .vertical {
            width: 10px;
            height: 40px;
        }

        .countdown-unit {
            display: inline-block;
            margin: 0 15px;
            text-align: center;
        }

        .countdown-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: row;
        }

        .unit {
            margin: 0 20px;
        }

        .label {
            margin-bottom: 10px;
            font-size: 20px;
            color: white;
        }
        .group {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    @media (max-width: 768px) {
        .group {
            flex-direction: column;
        }

        .unit {
            margin-right: 30px; 
        }
    }

    .blue-cell {
    background-color: #007bff; /* Bootstrap primary color */
    color: white;
}
.red-cell {
    background-color: #dc3545; /* Bootstrap danger color */
    color: white;
}

.winning-score {
    font-weight: bold;
    background-color: white;
    padding: 5px 10px; /* Add padding to make it taller and wider */
    border-radius: 5px; /* Rounded edges */
    color: inherit; /* Ensure the text color inherits from the inline style */
}


.highlight {
    background-color: #32a852; /* Bootstrap warning color, for highlighting */
}

.gray-cell {
    background-color: #6c757d; /* Bootstrap secondary color, used here for gray */
    color: white;
}

.button-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px; /* Adjust this value as needed to control spacing */
}

/* Ensure uniform size and margin for buttons and labels */
.button-wrapper button,
.button-wrapper label {
    margin: 0; /* Override default margins if necessary */
    height: 38px; /* Adjust based on your design needs */
    display: inline-flex; /* Align text and icons within buttons/labels */
    align-items: center; /* Center items vertically inside the button/label */
    justify-content: center; /* Center items horizontally inside the button/label */
}

/* Additional adjustments for label to mimic button appearance */
.button-wrapper label {
    cursor: pointer; /* Change cursor to pointer to indicate it's clickable */
    width: auto; /* Adjust width as needed, or set a specific width */
    padding: 0 12px; /* Adjust padding to match the button's appearance, customize as needed */
}

.modal-backdrop.show {
    opacity: 0.5;
}

.modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
}

@keyframes explode {
    from {
        transform: scale(0.1);
        opacity: 0.1;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

.modal-content {
    animation: explode 0.5s forwards;
}

.close:focus {
    outline: none;
    box-shadow: none;
}

nav.navbar {
    z-index: 1010; /* Ensures nav is above the confetti container */
    position: relative; /* Required to make z-index effective */
}

.upload-success-alert {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    visibility: hidden; /* Initially hidden */
    opacity: 0;
    z-index: 1051; /* Higher than Bootstrap modals */
    transition: visibility 0s linear 0.5s, opacity 0.5s linear; /* Delay visibility change */
    background-color: #d4edda; /* Light green background */
    color: #155724; /* Dark green text */
    border-color: #c3e6cb;
    padding: 0.75rem 1.25rem;
    border-radius: 0.25rem;
}

.upload-success-alert.show {
    visibility: visible;
    opacity: 1;
    transition: opacity 0.5s linear;
}

.down_up_container {
    margin-top: -30px;
    margin-bottom: 20px;
}
/* Dark Mode Toggle Switch Styles */
.switch {
  position: relative;
  display: inline-block;
  width: 80px;
  height: 34px;
  margin: 10px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: background-color .4s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: transform .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #555; /* Dark mode slider color */
}

input:checked + .slider:before {
  transform: translateX(46px); /* Slide to the right */
}

.icon {
  color: #fff;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 20px;
  transition: opacity 0.4s; /* Smooth transition for opacity */
}

.sun {
  left: 10px;
  opacity: 0; /* Start hidden */
}

.moon {
  right: 10px;
  opacity: 1; /* Start visible */
}

input:checked + .slider .sun {
  opacity: 1; /* Fade in when dark mode is on */
}

input:checked + .slider .moon {
  opacity: 0; /* Fade out when dark mode is on */
}

input:not(:checked) + .slider .sun {
  opacity: 0; /* Remain hidden when light mode is on */
}

input:not(:checked) + .slider .moon {
  opacity: 1; /* Remain visible when light mode is on */
}

#patch-notes, #aboutTabsContent {
    color: #343a40; /* Sets the text color for all content within the patch-notes container */
}

#patch-notes h3, #patch-notes p, #patch-notes a {
    color: inherit; /* Ensures that headers, paragraphs, and links inherit the same color */
}

/* Styles for dark and light modes */
.bg-dark, .navbar-dark, .card{
  background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}

body.bg-dark table {
    color:white;
}
body.bg-dark td:hover {
    color:yellow;
}
body.bg-dark tr:hover {
    color:yellow;
}
.bg-light, .navbar-light, .card {
  background-color: #f8f9fa !important; /* Light gray background */
  color: #343a40 !important; /* Dark text for readability */
}

body.bg-dark p {
  color: #343a40; 
}
/* Enhanced specific selectors for navbar in dark mode */
.navbar-dark {
  background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}

.navbar-dark .navbar-nav .nav-link,
.navbar-dark .navbar-brand {
  color: #f8f9fa !important; /* Ensure navbar text colors are adjusted for dark mode */
}
body.bg-dark .dropdown-item {
    background-color: #343a40 !important; /* Dark gray background */
  color: #f8f9fa !important; /* Light text for readability */
}
body.bg-dark .dropdown-item:hover {
    background-color: #f8f9fa !important; /* Light gray background */
  color: #343a40 !important; /* Dark text for readability */
}

body.bg-dark .dropdown-menu {
    background-color:  #343a40 !important; /* Light gray background */
}

.navbar-dark .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='rgba(248, 249, 250, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
}
         </style>
             <script>
                document.addEventListener("DOMContentLoaded", function() {
                    document.body.style.display = "none"; // Hide body as soon as DOM is ready but not fully loaded
                });
            </script>
</head>
<body>
    
     <div id="emilyModal" class="modal" tabindex="-1" role="dialog" style="display: none;">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="text-align: center;">
                    <p style="font-size: 2em;">Emily is AWESOME!!!!!</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="hamburger-menu d-lg-none">
        <div class="bar bg-dark"></div>
        <div class="bar bg-dark"></div>
        <div class="bar bg-dark"></div>
    </div>
    <header class="bg-primary text-white text-center py-3 mb-4">
        <div class="container">
            <a href="#"><h1 class="font-weight-light link-underline-light" id="roborte" style="color: #f8f9fa">Robort</h1></a>
            <h2 class="h4 font-weight-light">The ultimate in FRC competition gear</h2>
        </div>
    </header>
    <nav class="navbar navbar-expand-lg">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="./index.html">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./Team_List_element.html">Teams</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Scouting
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="./Strat_Board_w_tabs.html">Canvas</a>
                        <a class="dropdown-item" href="./scoutingGen.html">Scouting Generator</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./Checklist.html">Pre Match Checklist</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./2423_Features.html">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./Config_tab.html">Configure</a>
                </li>
            </ul>
            <label class="switch">
                <input type="checkbox" id="darkModeToggle">
                <span class="slider round">
                  <span class="icon sun">ðŸŒž</span> <!-- Sun icon -->
                  <span class="icon moon">ðŸŒœ</span> <!-- Moon icon -->
                </span>
              </label>
              
        </div>
    </nav>
    <div id="confetti-container" style="position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1;"></div>

   
    
    
    
        <div id="lcd-container">
            <h1 id="h1" class="text-center">Countdown Until We're Back On Einsteins</h1>
                <div id="countdown" class="countdown-container">
                  <div class="group">
                    <div class="unit">
                        <div class="label" style="color: grey;">Months</div>
                        <div style="display: inline-flex;">
                        <div class="digit" id="months-tens">
                            <div class="segment horizontal" id="months-tens-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="months-tens-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="months-tens-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="months-tens-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="months-tens-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="months-tens-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="months-tens-g" style="top: 45px; left: 5px;"></div>
                        </div>
                        <div class="digit" id="months-old">
                            <div class="segment horizontal" id="months-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="months-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="months-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="months-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="months-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="months-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="months-g" style="top: 45px; left: 5px;"></div>
                        </div>
                    </div>
                </div>
            
                    <div class="unit">
                        <div class="label" style="color: grey;">Days</div>
                        <div style="display: inline-flex;">
                        <div class="digit" id="days-tens">
                            <div class="segment horizontal" id="days-tens-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="days-tens-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="days-tens-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="days-tens-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="days-tens-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="days-tens-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="days-tens-g" style="top: 45px; left: 5px;"></div>
                        </div>
                        
                        <div class="digit" id="days">
                            <div class="segment horizontal" id="days-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="days-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="days-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="days-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="days-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="days-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="days-g" style="top: 45px; left: 5px;"></div>
                        </div>
                    </div>
                    </div>
                </div>
                <div class="group">
                    <div class="unit">
                        <div class="label" style="color: grey;">Hours</div>
                        <div style="display: inline-flex;">
                        <div class="digit" id="hours-tens">
                            <div class="segment horizontal" id="hours-tens-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="hours-tens-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="hours-tens-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="hours-tens-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="hours-tens-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="hours-tens-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="hours-tens-g" style="top: 45px; left: 5px;"></div>
                        </div>
                        <div class="digit" id="hours">
                            <div class="segment horizontal" id="hours-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="hours-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="hours-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="hours-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="hours-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="hours-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="hours-g" style="top: 45px; left: 5px;"></div>
                        </div>
                    </div>
                </div>
                    <div class="unit">
                        <div class="label" style="color: grey;">Minutes</div>
                        <div style="display: inline-flex;">
                        <div class="digit" id="minutes-tens">
                            <div class="segment horizontal" id="minutes-tens-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="minutes-tens-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="minutes-tens-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="minutes-tens-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="minutes-tens-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="minutes-tens-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="minutes-tens-g" style="top: 45px; left: 5px;"></div>
                        </div>
                        <div class="digit" id="minutes">
                            <div class="segment horizontal" id="minutes-a" style="top: 0; left: 5px;"></div>
                            <div class="segment vertical" id="minutes-b" style="top: 5px; right: 0;"></div>
                            <div class="segment vertical" id="minutes-c" style="bottom: 5px; right: 0;"></div>
                            <div class="segment horizontal" id="minutes-d" style="bottom: 0; left: 5px;"></div>
                            <div class="segment vertical" id="minutes-e" style="bottom: 5px; left: 0;"></div>
                            <div class="segment vertical" id="minutes-f" style="top: 5px; left: 0;"></div>
                            <div class="segment horizontal" id="minutes-g" style="top: 45px; left: 5px;"></div>
                        </div>
                    </div>
                </div>
            </div>
                    <div class="unit">
                        <div class="label" style="color: grey;">Seconds</div>
                        <div style="display: inline-flex;">
                            <div class="digit" id="seconds-tens">
                                <div class="segment horizontal" id="seconds-tens-a" style="top: 0; left: 5px;"></div>
                                <div class="segment vertical" id="seconds-tens-b" style="top: 5px; right: 0;"></div>
                                <div class="segment vertical" id="seconds-tens-c" style="bottom: 5px; right: 0;"></div>
                                <div class="segment horizontal" id="seconds-tens-d" style="bottom: 0; left: 5px;"></div>
                                <div class="segment vertical" id="seconds-tens-e" style="bottom: 5px; left: 0;"></div>
                                <div class="segment vertical" id="seconds-tens-f" style="top: 5px; left: 0;"></div>
                                <div class="segment horizontal" id="seconds-tens-g" style="top: 45px; left: 5px;"></div>
                            </div>
        
                            <div class="digit" id="seconds">
                                <div class="segment horizontal" id="seconds-a" style="top: 0; left: 5px;"></div>
                                <div class="segment vertical" id="seconds-b" style="top: 5px; right: 0;"></div>
                                <div class="segment vertical" id="seconds-c" style="bottom: 5px; right: 0;"></div>
                                <div class="segment horizontal" id="seconds-d" style="bottom: 0; left: 5px;"></div>
                                <div class="segment vertical" id="seconds-e" style="bottom: 5px; left: 0;"></div>
                                <div class="segment vertical" id="seconds-f" style="top: 5px; left: 0;"></div>
                                <div class="segment horizontal" id="seconds-g" style="top: 45px; left: 5px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
</div>
       <div class="container mt-5">
  <div class="row">
    <div class="col-12 mb-4">
      <h1 class="text-center">Matches</h1>
    </div>
    <div class="col-lg-6 mx-auto">
      <!-- <div class="input-group mb-3">
        <div class="input-group-prepend">
          <label class="input-group-text" for="eventCode">Event Code</label>
        </div>
        <select class="custom-select" id="eventCode">
          <option selected>Choose...</option>
          <option value="2024necmp2">2024 NE District Champs</option>
          <option value="2024mabos">2024 Greater Boston Event</option>
          <option value="2024mabri">2024 Week 2 BSU Event</option>
          <option value="2024week0">2024 Week 0 Event</option>
        </select>
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="button" id="loadData">Load Data</button>
        </div>
      </div> -->
        <h2>Current Event Code From Config: <span id="eventCode"></span></h2>
    </div>
    <!-- <div class="col-lg-6 mx-auto mb-3">
      <div class="d-flex justify-content-center">
        <input type="text" class="form-control" id="newOptionText" placeholder="Type new event code...">
        <div class="input-group-append">
          <button class="btn btn-outline-primary" type="button" id="addOptionButton">Add Option</button>
        </div>
      </div> -->
    </div><br>
    <div class="down_up_container">
        <div class="col-12 text-center mt-4 button-wrapper">
            <button id="downloadMatchData" class="btn btn-success">Download Match Data</button>
            <input type="file" id="uploadMatchData" hidden />
            <label for="uploadMatchData" class="btn btn-info">Upload Match Data</label>
        </div>
    </div>
    <div class="col-12">
      <div class="text-center mb-3">
        <label for="teamHighlight" class="mr-2">Select a team to highlight:</label>
        <select id="teamHighlight" class="custom-select d-inline w-auto">
          <!-- Options will be added here dynamically -->
        </select>
      </div>
      <div id="matchesTableContainer" class="table-responsive">
        <!-- Table will be generated and placed here dynamically -->
      </div>
    </div>
  </div>
  <div id="matchesTableContainer" class="table-responsive">
    <!-- Table will be generated and placed here dynamically -->
</div>
<!-- Insert the upload/download buttons here -->

    
    <!-- Warning Modal -->
<div class="modal fade" id="warningModal" tabindex="-1" role="dialog" aria-labelledby="warningModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="warningModalLabel">Warning</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          You have <b>not selected an event,</b> so the file will be empty. Do you still want to download it anyway?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-warning" id="confirmDownload">Download Anyway</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="errorModalLabel">Error</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="errorModalMessage">An error occurred.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<footer id="footer"class="text-center bg-dark py-4 mt-5">
    <!-- About the Project Modal -->
<div id="aboutModal" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="aboutTabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="about" aria-selected="true">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="patch-notes-tab" data-toggle="tab" href="#patch-notes" role="tab" aria-controls="patch-notes" aria-selected="false">Patch Notes</a>
                    </li>
                </ul>
                <div class="tab-content" id="aboutTabsContent">
                    <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                        <h2>Robort</h2>
                        <h4>The ultimate in FRC competition gear</h4>
                        <h5>Co-developed by Ben Skraly and Toba Banjo</h5>
                        <p>Whether you're preparing to scout a heated match, sharing information about your team, or analyzing other robots, Robort has got you covered. Complete with modular design and accessible systems, it's the best tool both on and off the field.</p>
                        <span>&copy; <script>document.write(new Date().getFullYear());</script> Watertown High School Robotics</span>
                    </div>
                    <div class="tab-pane fade" id="patch-notes" role="tabpanel" aria-labelledby="patch-notes-tab">
                        <!-- Patch notes will be populated here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</footer>
<script src="jquery-3.3.1.slim.min.js"></script>
 <script src="bootstrap.min.js"></script>
  <script src="electron.js"></script>

    <script>
          let apiData = [];
          let isDataLoaded = false;
          let isDataPresent = false;
          let ApiDataUploaded = localStorage.getItem('ApiDataUploaded');
          let dataArray = [];
          let lastSelectedOption = "winningAlliance"; // Default option
        function setupCloseModalEvent() {
    const closeModalButton = document.querySelector('.close');
    if (closeModalButton) {
        closeModalButton.addEventListener('click', closeModal);
    }
}
        document.addEventListener('DOMContentLoaded', function() {
            const closeModalButton = document.querySelector('.close');
    closeModalButton.addEventListener('click', function() {
        closeModal();
    });
    setupCloseModalEvent();
});
    //         document.getElementById('addOptionButton').addEventListener('click', function() {
    //             const selectElement = document.getElementById('eventCode');
    //             const newOptionText = document.getElementById('newOptionText').value;
    //             if (newOptionText.trim() !== '') {
    //                 const newOptionElement = new Option(newOptionText, newOptionText.toLowerCase().replace(/\s+/g, '_'));
    //                 selectElement.add(newOptionElement);
    //                 document.getElementById('newOptionText').value = '';
    //             }
    //         });
        
    //         document.getElementById('loadData').addEventListener('click', onPageLoad);
    //     });

    document.addEventListener('DOMContentLoaded', (event) => {
                let eventCode = localStorage.getItem('eventCode');
                document.getElementById('eventCode').textContent = eventCode;
                document.getElementById('eventCode').style = "color: red;";
                setupWebhookSubscription(eventCode);
                console.log(eventCode)
});

        function setupWebhookSubscription(eventCode) {
            const webhookEndpoint = `https://www.thebluealliance.com/api/v3/event/${eventCode}/matches/simple`;
            fetch(webhookEndpoint, {
                method: "GET",
                headers: {
                    "X-TBA-Auth-Key": "J43Af3iggAp3XBvsVaGm5Hbc7IlK6XR8W8WxQhLDlPiQbv6BbW8LWDvVg8Zj9fCV",
                },
            })
            .then((response) => {
                if (!response.ok) {
                    throw new Error('Invalid Event Code');
                }
                return response.json();
            })
            .then((responseData) => {
                 apiData = responseData;
                writeMatchResults(apiData);
                highlightCells();
                isDataLoaded = true;
                apiData = JSON.parse(apiData);
                localStorage.setItem('ApiDataUploaded', apiData)
            })
            .catch((error) => {
                dataArray = JSON.parse(ApiDataUploaded);
                const firstOccurrence = dataArray.find(entry => entry.hasOwnProperty('event_key'));
                if (!firstOccurrence) {
                    const errorMsg = document.createElement("div");
                errorMsg.textContent = "Invalid Event Code. Please try again.";
                errorMsg.className = "alert alert-danger";
                document.getElementById("matchesTableContainer").innerHTML = ''; // Clear previous data/messages
                document.getElementById("matchesTableContainer").appendChild(errorMsg);
                return;
                }
                if((ApiDataUploaded != null || ApiDataUploaded != "" || ApiDataUploaded != "[]") && (eventCode == (firstOccurrence.event_key))) {
                            // console.log(ApiDataUploaded);
                            apiData = JSON.parse(ApiDataUploaded);
                            // clearPreviousData();
                            writeMatchResults(apiData);
                            highlightCells();
                        } 
                        // else {
        //         const errorMsg = document.createElement("div");
        //         errorMsg.textContent = "Invalid Event Code. Please try again.";
        //         errorMsg.className = "alert alert-danger";
        //         document.getElementById("matchesTableContainer").innerHTML = ''; // Clear previous data/messages
        //         document.getElementById("matchesTableContainer").appendChild(errorMsg);
        // }
    });
        }
        
    //     function writeMatchResults(data) {
    //         data.sort((a, b) => {
    //     const order = ["qm", "qf", "sf", "f"];
    //     if (order.indexOf(a.comp_level) !== order.indexOf(b.comp_level)) {
    //         return order.indexOf(a.comp_level) - order.indexOf(b.comp_level);
    //     }
    //     return a.match_number - b.match_number;
    // });

    function writeMatchResults(data) {
        data.sort((a, b) => {
        const order = ["qm", "qf", "sf", "f"];
        if (order.indexOf(a.comp_level) !== order.indexOf(b.comp_level)) {
            return order.indexOf(a.comp_level) - order.indexOf(b.comp_level);
        }

        // If competition level is 'sf', compare using set_number
        if (a.comp_level === "sf" && b.comp_level === "sf") {
            // console.log(a.comp_level)
            // console.log(a.set_number)
            // console.log(a.set_number - b.set_number)
            return a.set_number - b.set_number;
        }

        return a.match_number - b.match_number;
        
    });

    
    document.addEventListener('change', function(e) {
    if (e.target && e.target.id === 'winningAllianceSelect') {
        lastSelectedOption = e.target.value;
        switch (e.target.value) {
            case "winningAlliance":
                updateTableForWinningAlliance();
                break;
            case "matchScore":
                updateTableForMatchScore(apiData);
                break;
            case "predictedStartTime":
                updateTableForPredictedStartTime(apiData);
                break;
            case "none":
                toggleWinningAllianceColumn(false);
                break;
        }
    }
});



function updateTableForWinningAlliance() {
    // Access the table body where match data rows are present
    const tbody = document.querySelector("#matchesTable tbody");
    if (!tbody) return; // Exit if the table body is not found

    // Ensure the Winning Alliance column is visible
    toggleWinningAllianceColumn(true);

    // Iterate over each row in the table body to update the Winning Alliance cell
    Array.from(tbody.rows).forEach((row, index) => {
        // Ensure there's corresponding data in apiData for this row
        if (index < apiData.length) {
            const matchData = apiData[index];
            const winningAlliance = matchData.winning_alliance;
            
            // Find the cell in the Winning Alliance column (assumed to be index 1)
            const winningAllianceCell = row.cells[1];

            // Reset the cell's text content to show the winning alliance
            // Additionally, apply styling based on the winning alliance
            winningAllianceCell.textContent = winningAlliance.charAt(0)+ winningAlliance.slice(1);
            winningAllianceCell.className = ''; // Clear any existing styles
            if (winningAlliance === 'blue') {
                winningAllianceCell.classList.add('blue-cell');
            } else if (winningAlliance === 'red') {
                winningAllianceCell.classList.add('red-cell');
            } else {
                // Handle cases where there might not be a winning alliance, if necessary
                winningAllianceCell.classList.add('gray-cell');
            }
        }
    });
}

function updateTableForMatchScore(data) {
    const tbody = document.querySelector("#matchesTable tbody");
    if (!tbody) return;

    Array.from(tbody.rows).forEach((row, index) => {
        if (index < data.length) {
            const match = data[index];
            const blueScore = match.alliances.blue.score;
            const redScore = match.alliances.red.score;
            let winningAlliance = match.winning_alliance;

            // Determine score text based on the winning alliance, apply color dynamically
            let scoreText = '';
            if (winningAlliance === 'blue') {
                scoreText = `<span class="winning-score" style="color: blue;">${blueScore}</span> to <span>${redScore}</span>`;
            } else if (winningAlliance === 'red') {
                scoreText = `<span>${blueScore}</span> to <span class="winning-score" style="color: red;">${redScore}</span>`;
            } else {
                // No winning alliance (e.g., a tie)
                scoreText = `${blueScore} to ${redScore}`;
            }

            const scoreCell = row.cells[1];
            scoreCell.innerHTML = scoreText;
        }
    });
}




function toggleWinningAllianceColumn(show) {
    const table = document.getElementById('matchesTable');
    const reAddButtonId = 'reAddColumnButton';

    // Find the index of the Winning Alliance column
    const columnIndex = Array.from(table.rows[0].cells).findIndex(cell => cell.querySelector('select#winningAllianceSelect'));

    // Loop through all rows and toggle the display of the specified column
    Array.from(table.rows).forEach(row => {
        if (columnIndex !== -1) {
            row.cells[columnIndex].style.display = show ? '' : 'none'; // Hide or show the cell
        }
    });

    // Locate the dropdown for team highlight
    const teamHighlightDropdown = document.getElementById('teamHighlight');
    
    if (!show) {
        if (!document.getElementById(reAddButtonId)) {
            // Create the re-add button
            const button = document.createElement('button');
            button.id = reAddButtonId;
            button.textContent = 'Re-add Winning Alliance Column';
            button.className = 'btn btn-primary ml-2'; // Added margin-left for spacing, assuming Bootstrap is used
            
            // Add onclick event to re-add the column and remove the button
            button.onclick = () => {
    // Remove the button once the column is potentially re-added
    button.remove();

    const winningAllianceSelect = document.getElementById('winningAllianceSelect');
    if (winningAllianceSelect) {
        // Reset the dropdown to the last selected option
        winningAllianceSelect.value = lastSelectedOption;

        // Ensure the Winning Alliance column is visible before dispatching the event
        toggleWinningAllianceColumn(true);

        // Manually trigger the change event to refresh the table based on the last selected option
        const event = new Event('change', { bubbles: true });
        winningAllianceSelect.dispatchEvent(event);
    }
};



            // Assuming the dropdown is wrapped in a div or similar container for layout
            // Insert the button next to the dropdown
            teamHighlightDropdown.parentNode.insertBefore(button, teamHighlightDropdown.nextSibling);
        }
    } else {
        const button = document.getElementById(reAddButtonId);
        if (button) {
            button.remove(); // Remove the button if the column is shown again
        }
        // Reset the dropdown to show 'Winning Alliance' as selected
        document.getElementById('winningAllianceSelect').value = 'winningAlliance';
    }
}

function updateTableForPredictedStartTime(data) {
    // Assume the table body has an id or can be accessed via querySelector
    const tbody = document.querySelector("#matchesTable tbody");
    if (!tbody) return; // Exit if the table body is not found

    // Iterate through each row in the table body
    Array.from(tbody.rows).forEach((row, index) => {
        if (index < data.length) { // Guard clause to avoid out-of-bounds access
            const predictedTime = data[index].predicted_time;
            const date = new Date(predictedTime * 1000); // Convert UNIX timestamp to JavaScript Date object
            const formattedDate = date.toLocaleString(); // Convert to readable local date and time string

            // Update the cell in the Winning Alliance column (index 1) with formatted date
            row.cells[1].textContent = formattedDate;
        }
    });
}


            const tableContainer = document.getElementById("matchesTableContainer");
    tableContainer.innerHTML = ''; // Clear existing table/data
    var table = document.createElement("table");
    table.className = "table table-hover table-striped table-bordered"; // Bootstrap classes
    table.id = "matchesTable"; // Added ID for easy reference
    var thead = table.createTHead();
    var tbody = table.createTBody();
    var headerRow = thead.insertRow();

    ["Match", "Winning Alliance", "Blue 1", "Blue 2", "Blue 3", "Red 1", "Red 2", "Red 3"].forEach(headerText => {
    var th = document.createElement("th");
    if (headerText === "Winning Alliance") {
        // Add a dropdown menu to the "Winning Alliance" header
        th.innerHTML = `<select class="custom-select" id="winningAllianceSelect">
            <option value="winningAlliance">Winning Alliance</option>
            <option value="matchScore">Match Score</option>
            <option value="predictedStartTime">Estimated Start Time</option>
            <option value="none">None</option>
        </select>`;
    } else {
        th.textContent = headerText;
    }
    headerRow.appendChild(th);
});

            const addedTeams = new Set();

            let setOrMatchNumber = "";


data.forEach(match => {
    var comp_level = match.comp_level;
    if (comp_level === "sf") {
        setOrMatchNumber = match.set_number
        // console.log('1')
    } else if(comp_level === "qm" || comp_level === "f") {
        // console.log('2')
        setOrMatchNumber = match.match_number

    }
    var row = tbody.insertRow();
    var matchInfo = [
        match.comp_level.toUpperCase() + " " + setOrMatchNumber,
        match.winning_alliance,
        ...match.alliances.blue.team_keys.map(teamKey => teamKey.substring(3)),
        ...match.alliances.red.team_keys.map(teamKey => teamKey.substring(3)),
    ];
    matchInfo.forEach((text, index) => {
        var cell = row.insertCell();
        cell.textContent = text;

        // Apply original coloring logic
        if (index === 1) {
                if (text === "blue") {
                    cell.classList.add("blue-cell");
                } else if (text === "red") {
                    cell.classList.add("red-cell");
                } else {
                    // If 'winning alliance' is empty, apply gray color
                    cell.classList.add("gray-cell");
                }
        } else if (index >= 2 && index <= 4) {
            cell.classList.add("blue-cell");
            cell.addEventListener("click", () => cellClickHandler(text));
        } else if (index >= 5 && index <= 7) {
            cell.classList.add("red-cell");
            cell.addEventListener("click", () => cellClickHandler(text));
        }

        // Collecting teams for the dropdown
        if (index > 1) addedTeams.add(text);
    });
});


tableContainer.appendChild(table);

// Populate teamHighlight dropdown with unique sorted team numbers
populateTeamHighlightDropdown(Array.from(addedTeams));
}


function populateTeamHighlightDropdown(teams) {
    const dropdown = document.getElementById("teamHighlight");
    dropdown.innerHTML = ''; // Clear existing options

    teams.sort((a, b) => a - b).forEach(team => {
        const option = document.createElement("option");
        option.value = team;
        option.textContent = team;
        dropdown.appendChild(option);
    });
}
function highlightCells() {
    var table = document.getElementById("matchesTable");
    var highlightTeam = document.getElementById("teamHighlight").value;

    for (let row of table.rows) {
        let matchHighlighted = false;
        for (let cell of row.cells) {
            // Remove previous highlights
            cell.classList.remove("highlight"); // Assuming you have CSS for .highlight
            
            // Highlight cells with matching team number
            if (cell.textContent.trim() === highlightTeam) {
                cell.classList.add("highlight");
                matchHighlighted = true;
            }
        }

        // Optionally highlight the match number cell if the team is in that match
        if (matchHighlighted) {
            row.cells[0].classList.add("highlight");
        }
    }
}

function cellClickHandler(team) {
    var dropdown = document.getElementById("teamHighlight");
    dropdown.value = team;
    highlightCells();
}

// Ensure highlightCells is called whenever the dropdown selection changes
document.getElementById("teamHighlight").addEventListener("change", highlightCells);

        
        </script>
        

    <script>
       const segmentMap = [
            ['a', 'b', 'c', 'd', 'e', 'f'],  // 0
            ['b', 'c'],  // 1
            ['a', 'b', 'g', 'e', 'd'],  // 2
            ['a', 'b', 'g', 'c', 'd'],  // 3
            ['f', 'g', 'b', 'c'],  // 4
            ['a', 'f', 'g', 'c', 'd'],  // 5
            ['a', 'f', 'g', 'e', 'd', 'c'],  // 6
            ['a', 'b', 'c'],  // 7
            ['a', 'b', 'c', 'd', 'e', 'f', 'g'],  // 8
            ['a', 'b', 'c', 'd', 'f', 'g']  // 9
        ];

        function updateDigit(digit, value) {
    const segments = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
    segments.forEach(segment => {
        const element = document.getElementById(`${digit}-${segment}`);
        if(element) {
            element.classList.remove('lit');
        }
    });
    segmentMap[value].forEach(segment => {
        const element = document.getElementById(`${digit}-${segment}`);
        if(element) {
            element.classList.add('lit');
        }
    });
}

        function daysInMonth(year, month) {
            return new Date(year, month, 0).getDate();
        }

        function getTimeRemaining() {
            const now = new Date();
            const nextKickoffDate = new Date("2024-04-20T07:00:00");
            let delta = Math.abs(nextKickoffDate - now) / 1000;

            const days = Math.floor(delta / 86400);
            delta -= days * 86400;

            const hours = Math.floor(delta / 3600) % 24;
            delta -= hours * 3600; 

            const minutes = Math.floor(delta / 60) % 60;
            delta -= minutes * 60;

            const seconds = Math.floor(delta % 60);

            let months = 0;
            let remainingDays = days;
            let month = now.getMonth();
            let yearCounter = now.getFullYear();

            while (remainingDays > 0) {
                let daysInCurrentMonth = new Date(yearCounter, month + 1, 0).getDate();
                if (remainingDays >= daysInCurrentMonth) {
                    remainingDays -= daysInCurrentMonth;
                    months++;
                    month++;
                    if (month > 11) {
                        month = 0;
                        yearCounter++;
                    }
                } else {
                    break;
                }
            }

            return {
                total: nextKickoffDate - now,
                months,
                days: remainingDays,
                hours,
                minutes,
                seconds
            };
        }

        function updateCountdown() {
            const t = getTimeRemaining();

            // Update two-digit displays
            updateDigit('months-tens', Math.floor(t.months / 10));
            updateDigit('months', t.months % 10);

            updateDigit('days-tens', Math.floor(t.days / 10));
            updateDigit('days', t.days % 10);

            updateDigit('hours-tens', Math.floor(t.hours / 10));
            updateDigit('hours', t.hours % 10);

            updateDigit('minutes-tens', Math.floor(t.minutes / 10));
            updateDigit('minutes', t.minutes % 10);

            updateDigit('seconds-tens', Math.floor(t.seconds / 10));
            updateDigit('seconds', t.seconds % 10);

            if (t.total <= 0) {
                clearInterval(timeinterval);
                confetti({
                particleCount: 50,
                 spread: 70,
                 origin: { y: 0.6 },
                zIndex: -1, // Ensure this is high enough to be above the modal
                duration: 3000,
                target: document.getElementById('confetti-container')
});
                document.getElementById('h1').innerHTML = "FRC Kickoff is here! Good luck teams!";
                
            }
        }

    updateCountdown();
        const timeinterval = setInterval(updateCountdown, 1000);
 

        document.body.addEventListener('keyup', (function() {
    let sequence = '';
    const targetSequence = 'emily';
    const targetSequence2 = 'amory';
    return function(event) {
        sequence += event.key.toLowerCase();
        if (sequence === targetSequence) {
            showModalAndConfetti();
            sequence = ''; // Reset the sequence after showing the modal.
        } else if (sequence === targetSequence2){
            sequence = '';
            window.location.replace("amory.html");
        } else if (!targetSequence.startsWith(sequence) && !targetSequence2.startsWith(sequence)) {
            // If the current sequence doesn't match the start of the target,
            // reset it to prevent incorrect partial matches.
            sequence = '';
        }
    };
})());

function showModalAndConfetti() {
    const modal = document.getElementById('emilyModal');
    if (modal.style.display === "block") {
        return; // Exit if the modal is already displayed
    }
    modal.style.display = 'block';
    confetti();
}


function closeModal() {
    const modal = document.getElementById('emilyModal');
    modal.style.display = 'none';
    // Reset sequence or perform other cleanup tasks as necessary
}

// This ensures the closeModal function is properly called when the close button is clicked.

function downloadData() {
    
    // Ensure this retrieves the current value at the time of function call
    if (typeof apiData == "string") {
        dataArray = JSON.parse(apiData);
    }
    else {
        dataArray = apiData;
    }

    if (dataArray && dataArray.some(entry => entry.hasOwnProperty('event_key'))) {
        // Find the first occurrence of 'event_key' in uploadedData
        const firstOccurrence = dataArray.find(entry => entry.hasOwnProperty('event_key'));
        eventCode = firstOccurrence.event_key;
    } else {
        // Fallback to getting the event code from the document if no uploaded data
        eventCode = document.getElementById("eventCode").value;
    }
    const eventCodeSelect = document.getElementById("eventCode");
    const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(dataArray));
    const downloadAnchorNode = document.createElement('a');
    downloadAnchorNode.setAttribute("href", dataStr);
    if (eventCodeSelect.value === (("Choose..." || !isDataLoaded  || matchesTable.rows.length === 0) & !isDataPresent ) || !isDataLoaded) { 
    downloadAnchorNode.setAttribute("download", `apiData_for_code_null.json`);
    } else {downloadAnchorNode.setAttribute("download", `apiData_for_code_${eventCode}.json`);}
    document.body.appendChild(downloadAnchorNode); // Required for Firefox
    downloadAnchorNode.click();
    downloadAnchorNode.remove();
}

document.getElementById('downloadMatchData').addEventListener('click', function() {
    const eventCodeSelect = document.getElementById("eventCode");
    if (eventCodeSelect.value === (("Choose..." || !isDataLoaded  || matchesTable.rows.length === 0) & !isDataPresent) || !isDataLoaded) {
        // Show the warning modal
        $('#warningModal').modal('show');
    } else {
        // Proceed with the download logic if a valid event is selected
        downloadData();
    }
});

document.getElementById('confirmDownload').addEventListener('click', function() {
    // Close the warning modal
    $('#warningModal').modal('hide');
    // Call the download function here if you want to allow downloading even when "Choose..." is selected
    downloadData();
});


document.addEventListener('DOMContentLoaded', function () {
                const downloadBtn = document.getElementById('downloadMatchData');
});
document.getElementById('uploadMatchData').addEventListener('change', function(event) {
    uploadData(event);
});
function uploadData(event) {
    const file = event.target.files[0];
    if (!file) {
        return;
    }
    const reader = new FileReader();
    reader.onload = (e) => {
        try {
            const content = e.target.result;
            const uploadedData = JSON.parse(content);
            if (!Array.isArray(uploadedData)) { // Basic validation to check if it's an array
                throw new Error('Invalid data format');
            }
            apiData = uploadedData; // Assuming apiData is the variable used to store and display match data
            writeMatchResults(apiData); // Re-render the match table with the uploaded data
            const firstOccurrence = apiData.find(entry => entry.hasOwnProperty('event_key'));
            eventCode = firstOccurrence.event_key;
            localStorage.setItem('ApiDataUploaded', JSON.stringify(apiData))
            localStorage.setItem('eventCode', eventCode);
            document.getElementById('eventCode').textContent = eventCode;
            document.getElementById('eventCode').style = "color: red;";
            showSuccessAlert('Upload success!');
            isDataLoaded = true;
            isDataPresent = true;
            // Optionally reset other UI elements as needed, similar to the clearPreviousData function
        } catch (error) {
            // Show error modal if JSON is invalid or if there's any other error
            showErrorModal('Invalid file format. Please upload a valid JSON file.');
        }
    };
    reader.readAsText(file);
}
function showErrorModal(errorMessage) {
    // Assuming there's an element with id 'errorModal' and an element inside it to display the error message
    document.getElementById('errorModalMessage').textContent = errorMessage;
    $('#errorModal').modal('show'); // Using Bootstrap's jQuery modal show function
}
function showSuccessAlert(message) {
    const alertBox = document.createElement('div');
    alertBox.className = 'alert alert-success upload-success-alert';
    alertBox.innerHTML = `<span class="mr-2">&#10003;</span>${message}`;
    document.body.appendChild(alertBox);

    // Trigger reflow to ensure the transition can happen
    alertBox.offsetHeight; // Read offsetHeight to force reflow

    // Start fade in
    alertBox.classList.add('show');

    // Start fade out after a delay
    setTimeout(() => {
        alertBox.classList.remove('show');

        // Remove the element after the fade-out transition completes
        setTimeout(() => {
            document.body.removeChild(alertBox);
        }, 500); // Match the CSS transition duration
    }, 3000); // Visible duration before starting fade-out
}
        </script>
        <script>
         document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.getElementById('darkModeToggle');
    const body = document.body;
    const navbar = document.querySelector('.navbar');
    const footer = document.getElementById('footer');

    // Function to apply dark mode
    function applyDarkMode() {
        body.classList.add('bg-dark');
        body.classList.remove('bg-light');
        navbar.classList.add('navbar-dark');
        navbar.classList.remove('navbar-light');
        footer.classList.add('bg-dark');
        footer.classList.remove('bg-light');
        document.querySelectorAll('.navbar').forEach(element => {
            element.classList.add('bg-dark');
            element.classList.remove('bg-light');
        });
      document.querySelectorAll('.custom-select').forEach(element => {
                  element.classList.add('bg-dark');
                  element.classList.remove('bg-white');
                });
    }

    

    // Function to remove dark mode
    function removeDarkMode() {
        body.classList.add('bg-light');
        body.classList.remove('bg-dark');
        navbar.classList.add('navbar-light');
        navbar.classList.remove('navbar-dark');
        footer.classList.add('bg-light');
        footer.classList.remove('bg-dark');
        document.querySelectorAll('.navbar').forEach(element => {
            element.classList.add('bg-light');
            element.classList.remove('bg-dark');
        });
        document.querySelectorAll('.custom-select').forEach(element => {
                  element.classList.add('bg-white');
                  element.classList.remove('bg-dark');
                });
    }

    // Check local storage and apply dark mode if enabled
    let darkModeSetting = localStorage.getItem('darkMode');
    if (darkModeSetting === 'true') {
        applyDarkMode();
        toggle.checked = true;
    } else {
        removeDarkMode();
    }

    // Ensure the body is visible after applying the settings
    body.style.display = 'block';

    // Toggle dark mode on checkbox change and update local storage
    toggle.addEventListener('change', function() {
        if (this.checked) {
            localStorage.setItem('darkMode', 'true');
            applyDarkMode();
        } else {
            localStorage.setItem('darkMode', 'false');
            removeDarkMode();
        }
    });
});

document.getElementById('roborte').addEventListener('click', function() {
    $('#aboutModal').modal('show');
});

// Fetch and display GitHub release notes with markdown parsing and specific download link
function loadGitHubReleases() {
    const apiUrl = 'https://api.github.com/repos/skac121245/Robort/releases';
    const converter = new showdown.Converter(); // Initialize markdown converter
    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('patch-notes');
            container.innerHTML = ''; // Clear existing content
            data.forEach(release => {
                if (release.body !== null) { // Only display if there's a description
                    const markdownHTML = converter.makeHtml(release.body);
                    const releaseDiv = document.createElement('div');
                    releaseDiv.innerHTML = `
                        <h3>${release.tag_name}</h3>
                        <div>${markdownHTML}</div>
                        <a href="${release.html_url}" target="_blank">View on GitHub</a>
                        <hr>`;
                    container.appendChild(releaseDiv);
                }
            });
        })
        .catch(error => console.error('Error fetching GitHub releases:', error));
}



document.getElementById('patch-notes-tab').addEventListener('click', function() {
    loadGitHubReleases();
});

            </script>
            
            <script>
        window.onload = function() {
            document.body.style.display = "block"; // Show body when everything is loaded
        };
    </script>
         </body>
    </html>
        